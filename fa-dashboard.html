<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>FA Cash Board | Financial Audit Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{
      --bg:#060818;
      --card:#11152b;
      --border:#262b46;
      --muted:#a3acc7;
      --accent1:#0d6efd;
      --accent2:#f97316;
      --accent3:#22c55e;
      --accent4:#e11d48;
      --accent5:#a855f7;
      --accent6:#14b8a6;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    body{
      margin:0;
      font-family:"Segoe UI",Arial, sans-serif;
      background:radial-gradient(circle at 0 0,rgba(244,143,177,0.16) 0,transparent 55%),
                 radial-gradient(circle at 100% 100%,rgba(66,165,245,0.18) 0,transparent 55%),
                 var(--bg);
      color:#f5f7ff;
    }

    header{
      padding:16px 14px;
      background:linear-gradient(120deg,#7b1e3c,#0d47a1,#20c997);
      box-shadow:0 6px 20px rgba(0,0,0,.55);
    }
    .header-inner{
      max-width:1200px;
      margin:0 auto;
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
    }
    .h-left h1{
      margin:0;
      font-size:24px;
      font-weight:800;
    }
    .h-left p{
      margin:3px 0;
      font-size:13px;
      opacity:.9;
    }
    .h-right{
      text-align:right;
      font-size:12px;
    }
    .nav-links{
      margin-top:6px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      justify-content:flex-end;
    }
    .nav-links a{
      text-decoration:none;
      color:#e5edff;
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.45);
      background:rgba(15,23,42,.25);
      backdrop-filter:blur(4px);
    }

    .page{
      max-width:1200px;
      margin:16px auto 30px;
      padding:0 12px 24px;
    }

    .layout{
      display:grid;
      grid-template-columns: minmax(0,3fr) minmax(260px,1.4fr);
      gap:16px;
    }
    @media(max-width:960px){
      .layout{grid-template-columns:1fr;}
    }

    .card{
      background:rgba(6,8,24,.92);
      border-radius:16px;
      border:1px solid var(--border);
      box-shadow:0 8px 20px rgba(0,0,0,.6);
      padding:12px 14px 14px;
      margin-bottom:10px;
    }
    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-bottom:8px;
    }
    .card-title{
      font-size:14px;
      font-weight:700;
    }
    .card-sub{
      font-size:11px;
      color:var(--muted);
    }

    .filters{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin:4px 0 2px;
      font-size:11px;
    }
    .filters label{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .filters select{
      padding:3px 6px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#020617;
      color:#e5e7eb;
      font-size:11px;
    }

    .kpi-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:8px;
      margin-bottom:10px;
    }
    .kpi{
      background:#020617;
      border-radius:12px;
      border:1px solid var(--border);
      padding:7px 8px;
      font-size:11px;
    }
    .kpi-label{
      color:var(--muted);
      margin-bottom:3px;
    }
    .kpi-value{
      font-size:18px;
      font-weight:700;
    }
    .kpi-note{
      margin-top:2px;
      font-size:10px;
      color:var(--muted);
    }

    .charts-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:10px;
    }
    .chart-box{
      background:#020617;
      border-radius:12px;
      border:1px solid var(--border);
      padding:8px 8px 10px;
      font-size:11px;
    }
    .chart-title{
      margin-bottom:4px;
      color:var(--muted);
    }
    canvas{max-width:100%; height:220px;}

    .table-wrap{
      margin-top:6px;
      max-height:230px;
      overflow:auto;
      border-radius:10px;
      border:1px solid var(--border);
      background:#020617;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:11px;
    }
    th,td{
      padding:4px 6px;
      border-bottom:1px solid #111827;
      white-space:nowrap;
    }
    th{
      position:sticky;
      top:0;
      background:#111827;
      z-index:1;
      text-align:left;
    }
    tr:hover td{
      background:#0b1120;
    }

    /* Data entry panel */
    .entry-form label{
      font-size:11px;
      display:block;
      margin-top:4px;
      color:var(--muted);
    }
    .entry-form input,
    .entry-form select{
      width:100%;
      padding:4px 6px;
      margin-top:2px;
      border-radius:8px;
      border:1px solid var(--border);
      background:#020617;
      color:#e5e7eb;
      font-size:11px;
    }
    .entry-row{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:6px;
    }
    .entry-actions{
      margin-top:8px;
      display:flex;
      justify-content:space-between;
      gap:6px;
    }
    button{
      border:none;
      border-radius:999px;
      padding:5px 10px;
      font-size:11px;
      cursor:pointer;
    }
    .btn-primary{
      background:var(--accent1);
      color:#e5e7eb;
    }
    .btn-secondary{
      background:#020617;
      border:1px solid var(--border);
      color:var(--muted);
    }
    .small-note{
      margin-top:4px;
      font-size:10px;
      color:var(--muted);
    }
  </style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="h-left">
      <h1>FA Cash Board ‚Äì Local Government Financial Audit</h1>
      <p>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‡∏≠‡∏õ‡∏ó. ‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® ‚Ä¢ ‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‚Ä¢ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‚Ä¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à</p>
      <p style="font-size:11px;opacity:.9;">
        ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á (Prototype) ‚Äì ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ
      </p>
    </div>
    <div class="h-right">
      <div id="nowDate">--</div>
      <div id="nowTime" style="font-variant-numeric:tabular-nums;">--:--:-- ‡∏ô.</div>
      <div class="nav-links">
        <a href="index.html">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        <a href="#top">üìä Cash Board ‡∏´‡∏•‡∏±‡∏Å</a>
        <a href="fa-menu.html">üìÇ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</a>
        <a href="fa-review-login.html">üßÆ ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ó‡∏≤‡∏ô</a>
        <a href="fa-tracking.html">üìå ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•</a>
        <a href="fa-chatbot.html">ü§ñ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏≤‡∏°‚Äì‡∏ï‡∏≠‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</a>
        <a href="fa-database-login.html">üóÑ ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• FA</a>
      </div>
    </div>
  </div>
</header>

<div class="page" id="top">
  <div class="layout">
    <!-- LEFT: DASHBOARD -->
    <div>
      <!-- FILTER & KPI -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á & ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°</div>
            <div class="card-sub">
              ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î / ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ / ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏≠‡∏õ‡∏ó. ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡πÅ‡∏ö‡∏ö Real-time ‡∏à‡∏≤‡∏Å‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ
            </div>
          </div>
        </div>
        <div class="filters">
          <label>
            ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (Province)
            <select id="filterProvince"></select>
          </label>
          <label>
            ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ (District)
            <select id="filterAmphoe"></select>
          </label>
          <label>
            ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏≠‡∏õ‡∏ó. (Type)
            <select id="filterType">
              <option value="ALL">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
              <option value="‡∏Å‡∏ó‡∏°">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</option>
              <option value="‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏±‡∏ó‡∏¢‡∏≤">‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏±‡∏ó‡∏¢‡∏≤</option>
              <option value="‡∏≠‡∏ö‡∏à.">‡∏≠‡∏ö‡∏à.</option>
              <option value="‡∏ó‡∏ô.">‡∏ó‡∏ô.</option>
              <option value="‡∏ó‡∏ï.">‡∏ó‡∏ï.</option>
              <option value="‡∏≠‡∏ö‡∏ï.">‡∏≠‡∏ö‡∏ï.</option>
            </select>
          </label>
        </div>
        <div class="kpi-grid">
          <div class="kpi">
            <div class="kpi-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏≠‡∏õ‡∏ó. ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏ô‡∏µ‡πâ</div>
            <div class="kpi-value" id="kpiTotalLG">0</div>
            <div class="kpi-note">‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏à‡∏≤‡∏Å‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö / ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à / ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</div>
            <div class="kpi-value" id="kpiAuditStatus">0 / 0 / 0</div>
            <div class="kpi-note">‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</div>
            <div class="kpi-value" id="kpiAdjusted">0</div>
            <div class="kpi-note">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</div>
            <div class="kpi-value" id="kpiCleanOpinion">0</div>
            <div class="kpi-note">Unqualified Opinion</div>
          </div>
        </div>
      </div>

      <!-- SECTION 1.1 & 1.2 -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">1.1 ‚Äì ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏≠‡∏õ‡∏ó. ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</div>
            <div class="card-sub">‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏Å‡∏ó‡∏° ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏±‡∏ó‡∏¢‡∏≤ ‡∏≠‡∏ö‡∏à. ‡∏ó‡∏ô. ‡∏ó‡∏ï. ‡∏≠‡∏ö‡∏ï. ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞</div>
          </div>
        </div>
        <div class="charts-grid">
          <div class="chart-box">
            <div class="chart-title">‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏≠‡∏õ‡∏ó. (Pie)</div>
            <canvas id="chartTypePie"></canvas>
          </div>
          <div class="chart-box">
            <div class="chart-title">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏≠‡∏õ‡∏ó. ‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (Bar)</div>
            <canvas id="chartProvinceBar"></canvas>
          </div>
        </div>
        <div class="table-wrap" title="‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">
          <table>
            <thead>
              <tr>
                <th>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</th>
                <th>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</th>
                <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡πÅ‡∏ñ‡∏ß‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)</th>
              </tr>
            </thead>
            <tbody id="tableLG"></tbody>
          </table>
        </div>
      </div>

      <!-- 1.2 ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏¥‡∏î‡∏á‡∏ö / ‡∏™‡πà‡∏á‡∏á‡∏ö -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">1.2 ‚Äì ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô / ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</div>
            <div class="card-sub">‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß / ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏ö / ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏á‡∏ö / ‡∏™‡πà‡∏á‡∏á‡∏ö‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤</div>
          </div>
        </div>
        <div class="charts-grid">
          <div class="chart-box">
            <div class="chart-title">‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Pie)</div>
            <canvas id="chartFSStatusPie"></canvas>
          </div>
          <div class="chart-box">
            <div class="chart-title">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏¥‡∏î‡∏á‡∏ö (Bar)</div>
            <canvas id="chartFSStatusBar"></canvas>
          </div>
        </div>
      </div>

      <!-- 1.3 & 1.4 -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">1.3‚Äì1.4 ‚Äì ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö & ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</div>
            <div class="card-sub">‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç / ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç / ‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏á‡∏ö + ‡∏°‡∏µ/‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á</div>
          </div>
        </div>
        <div class="charts-grid">
          <div class="chart-box">
            <div class="chart-title">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Audit Opinion)</div>
            <canvas id="chartOpinionPie"></canvas>
          </div>
          <div class="chart-box">
            <div class="chart-title">‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà</div>
            <canvas id="chartAdjustmentPie"></canvas>
          </div>
        </div>
      </div>

      <!-- 1.5 & 1.6 -->
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">1.5‚Äì1.6 ‚Äì ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö & ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</div>
            <div class="card-sub">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° Workflow ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•</div>
          </div>
        </div>
        <div class="charts-grid">
          <div class="chart-box">
            <div class="chart-title">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à / ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à / ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô)</div>
            <canvas id="chartAuditStatusBar"></canvas>
          </div>
          <div class="chart-box">
            <div class="chart-title">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (Line)</div>
            <canvas id="chartProgressLine"></canvas>
          </div>
        </div>
      </div>

    </div>

    <!-- RIGHT: DATA ENTRY + INFO -->
    <div>
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">2. ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Entry)</div>
            <div class="card-sub">
              ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏≠‡∏õ‡∏ó. ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ö‡∏ô Cash Board <br>
              ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå (localStorage) ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
            </div>
          </div>
        </div>
        <form class="entry-form" id="entryForm">
          <div class="entry-row">
            <div>
              <label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (Province)
                <input type="text" id="inProvince" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©" required>
              </label>
            </div>
            <div>
              <label>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ (District)
                <input type="text" id="inAmphoe" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©" required>
              </label>
            </div>
          </div>

          <div class="entry-row">
            <div>
              <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏≠‡∏õ‡∏ó.
                <select id="inType" required>
                  <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...</option>
                  <option value="‡∏Å‡∏ó‡∏°">‡∏Å‡∏ó‡∏°</option>
                  <option value="‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏±‡∏ó‡∏¢‡∏≤">‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏±‡∏ó‡∏¢‡∏≤</option>
                  <option value="‡∏≠‡∏ö‡∏à.">‡∏≠‡∏ö‡∏à.</option>
                  <option value="‡∏ó‡∏ô.">‡∏ó‡∏ô.</option>
                  <option value="‡∏ó‡∏ï.">‡∏ó‡∏ï.</option>
                  <option value="‡∏≠‡∏ö‡∏ï.">‡∏≠‡∏ö‡∏ï.</option>
                </select>
              </label>
            </div>
            <div>
              <label>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô)
                <input type="text" id="inEntity" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏£‡∏Å">
              </label>
            </div>
          </div>

          <div class="entry-row">
            <div>
              <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
                <select id="inFSStatus" required>
                  <option value="‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß">‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß</option>
                  <option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏ö">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏ö</option>
                  <option value="‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏á‡∏ö">‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏á‡∏ö</option>
                  <option value="‡∏™‡πà‡∏á‡∏á‡∏ö‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤">‡∏™‡πà‡∏á‡∏á‡∏ö‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤</option>
                </select>
              </label>
            </div>
            <div>
              <label>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Opinion)
                <select id="inOpinion" required>
                  <option value="‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç">‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</option>
                  <option value="‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç">‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</option>
                  <option value="‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á">‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</option>
                </select>
              </label>
            </div>
          </div>

          <div class="entry-row">
            <div>
              <label>‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
                <select id="inAdjusted" required>
                  <option value="‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á">‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</option>
                  <option value="‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á</option>
                </select>
              </label>
            </div>
            <div>
              <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
                <select id="inAuditStatus" required>
                  <option value="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</option>
                  <option value="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</option>
                  <option value="‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                </select>
              </label>
            </div>
          </div>

          <label>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (Workflow Stage)
            <select id="inProgress" required>
              <option value="‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß">‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß</option>
              <option value="‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</option>
              <option value="‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏≥‡∏Å‡∏≤‡∏£">‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏≥‡∏Å‡∏≤‡∏£</option>
              <option value="‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏õ‡∏¥‡∏î‡∏ï‡∏£‡∏ß‡∏à">‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏õ‡∏¥‡∏î‡∏ï‡∏£‡∏ß‡∏à</option>
              <option value="‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏µ‡πâ‡πÅ‡∏à‡∏á">‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏µ‡πâ‡πÅ‡∏à‡∏á</option>
              <option value="‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö">‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</option>
              <option value="‡∏™‡πà‡∏á ‡∏ú‡∏≠‡∏Å ‡∏™‡∏≠‡∏ö‡∏ó‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô">‡∏™‡πà‡∏á ‡∏ú‡∏≠‡∏Å ‡∏™‡∏≠‡∏ö‡∏ó‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</option>
              <option value="‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö">‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</option>
              <option value="‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</option>
            </select>
          </label>

          <div class="entry-actions">
            <button type="submit" class="btn-primary">‚ûï ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤ Cash Board</button>
            <button type="button" class="btn-secondary" id="btnResetData">
              ‚ôª ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
            </button>
          </div>
          <div class="small-note">
            ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏≤‡∏ü/‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡πÅ‡∏ö‡∏ö Real-time (‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå) <br>
            ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° JSON / API ‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• FA ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏ô‡∏°‡∏∑‡∏≠‡πÑ‡∏î‡πâ
          </div>
        </form>
      </div>

      <div class="card">
        <div class="card-header">
          <div class="card-title">3. Tooltip / Hover Details</div>
        </div>
        <div style="font-size:11px;color:var(--muted);line-height:1.5;">
          ‚Ä¢ ‡∏Å‡∏£‡∏≤‡∏ü‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÉ‡∏ä‡πâ tooltip ‡∏Ç‡∏≠‡∏á Chart.js ‚Äì ‡πÄ‡∏≠‡∏≤‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ä‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà<br>
          ‚Ä¢ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏≠‡∏õ‡∏ó. ‡πÉ‡∏ä‡πâ hover ‡πÅ‡∏™‡∏î‡∏á row highlight ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‚Äì‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‚Äì‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô<br>
          ‚Ä¢ ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç KPI ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // ========= CLOCK =========
  function updateNow(){
    const now = new Date();
    const d = now.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"});
    const t = now.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit",second:"2-digit"});
    document.getElementById("nowDate").textContent = d;
    document.getElementById("nowTime").textContent = t + " ‡∏ô.";
  }
  updateNow();
  setInterval(updateNow,1000);

  // ========= DATA MODEL =========
  const STORAGE_KEY = "fa_dashboard_entities";

  const defaultData = [
    {
      province:"‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©", amphoe:"‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©", type:"‡∏ó‡∏ï.",
      entity:"‡∏ó‡∏ï.‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏£‡∏Å",
      fsStatus:"‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß",
      opinion:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç",
      adjusted:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á",
      auditStatus:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",
      progress:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"
    },
    {
      province:"‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©", amphoe:"‡∏Å‡∏±‡∏ô‡∏ó‡∏£‡∏•‡∏±‡∏Å‡∏©‡πå", type:"‡∏≠‡∏ö‡∏ï.",
      entity:"‡∏≠‡∏ö‡∏ï.‡∏ä‡∏≥",
      fsStatus:"‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß",
      opinion:"‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç",
      adjusted:"‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á",
      auditStatus:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",
      progress:"‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"
    },
    {
      province:"‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ", amphoe:"‡∏ß‡∏≤‡∏£‡∏¥‡∏ô‡∏ä‡∏≥‡∏£‡∏≤‡∏ö", type:"‡∏ó‡∏ô.",
      entity:"‡∏ó‡∏ô.‡∏ß‡∏≤‡∏£‡∏¥‡∏ô‡∏ä‡∏≥‡∏£‡∏≤‡∏ö",
      fsStatus:"‡∏™‡πà‡∏á‡∏á‡∏ö‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤",
      opinion:"‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç",
      adjusted:"‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á",
      auditStatus:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
      progress:"‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏≥‡∏Å‡∏≤‡∏£"
    },
    {
      province:"‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ", amphoe:"‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ", type:"‡∏≠‡∏ö‡∏à.",
      entity:"‡∏≠‡∏ö‡∏à.‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ",
      fsStatus:"‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß",
      opinion:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç",
      adjusted:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á",
      auditStatus:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
      progress:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"
    },
    {
      province:"‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£", amphoe:"‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å", type:"‡∏Å‡∏ó‡∏°",
      entity:"‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏£‡∏±‡∏Å",
      fsStatus:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏ö",
      opinion:"‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç",
      adjusted:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á",
      auditStatus:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
      progress:"‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß"
    },
    {
      province:"‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ", amphoe:"‡∏ö‡∏≤‡∏á‡∏•‡∏∞‡∏°‡∏∏‡∏á", type:"‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏±‡∏ó‡∏¢‡∏≤",
      entity:"‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏±‡∏ó‡∏¢‡∏≤",
      fsStatus:"‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß",
      opinion:"‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á",
      adjusted:"‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á",
      auditStatus:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
      progress:"‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏µ‡πâ‡πÅ‡∏à‡∏á"
    },
    {
      province:"‡∏¢‡πÇ‡∏™‡∏ò‡∏£", amphoe:"‡∏Ñ‡∏≥‡πÄ‡∏Ç‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡∏ß", type:"‡∏≠‡∏ö‡∏ï.",
      entity:"‡∏≠‡∏ö‡∏ï.‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÄ‡∏û‡πá‡∏á",
      fsStatus:"‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏á‡∏ö",
      opinion:"‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á",
      adjusted:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á",
      auditStatus:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
      progress:"‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß"
    },
    {
      province:"‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©", amphoe:"‡∏Å‡∏±‡∏ô‡∏ó‡∏£‡∏≤‡∏£‡∏°‡∏¢‡πå", type:"‡∏≠‡∏ö‡∏ï.",
      entity:"‡∏≠‡∏ö‡∏ï.‡∏î‡∏π‡∏ô",
      fsStatus:"‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß",
      opinion:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç",
      adjusted:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á",
      auditStatus:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",
      progress:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"
    }
  ];

  let entities = [];

  function loadData(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      entities = raw ? JSON.parse(raw) : defaultData.slice();
    }catch(e){
      entities = defaultData.slice();
    }
  }
  function saveData(){
    localStorage.setItem(STORAGE_KEY,JSON.stringify(entities));
  }

  // ========= FILTER =========
  const selProvince = document.getElementById("filterProvince");
  const selAmphoe   = document.getElementById("filterAmphoe");
  const selType     = document.getElementById("filterType");

  function initFilters(){
    const provinces = [...new Set(entities.map(e=>e.province))].sort();
    selProvince.innerHTML = `<option value="ALL">‡∏ó‡∏∏‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>`;
    provinces.forEach(p=>{
      const opt = document.createElement("option");
      opt.value = p;
      opt.textContent = p;
      selProvince.appendChild(opt);
    });
    updateAmphoeOptions();
  }

  function updateAmphoeOptions(){
    const p = selProvince.value;
    let amphoes = entities;
    if(p!=="ALL") amphoes = amphoes.filter(e=>e.province===p);
    const list = [...new Set(amphoes.map(e=>e.amphoe))].sort();
    selAmphoe.innerHTML = `<option value="ALL">‡∏ó‡∏∏‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</option>`;
    list.forEach(a=>{
      const opt = document.createElement("option");
      opt.value = a;
      opt.textContent = a;
      selAmphoe.appendChild(opt);
    });
  }

  function getFilteredEntities(){
    const p = selProvince.value;
    const a = selAmphoe.value;
    const t = selType.value;
    return entities.filter(e=>{
      if(p!=="ALL" && e.province!==p) return false;
      if(a!=="ALL" && e.amphoe!==a) return false;
      if(t!=="ALL" && e.type!==t) return false;
      return true;
    });
  }

  selProvince.addEventListener("change",()=>{
    updateAmphoeOptions();
    renderAll();
  });
  selAmphoe.addEventListener("change",renderAll);
  selType.addEventListener("change",renderAll);

  // ========= CHARTS =========
  const charts = {
    typePie:null,
    provinceBar:null,
    fsPie:null,
    fsBar:null,
    opinionPie:null,
    adjustPie:null,
    auditBar:null,
    progressLine:null
  };

  const palette = [
    "rgba(37,99,235,0.9)",
    "rgba(220,38,38,0.9)",
    "rgba(22,163,74,0.9)",
    "rgba(234,179,8,0.9)",
    "rgba(236,72,153,0.9)",
    "rgba(14,165,233,0.9)",
    "rgba(249,115,22,0.9)",
    "rgba(168,85,247,0.9)",
    "rgba(20,184,166,0.9)",
    "rgba(148,163,184,0.9)"
  ].map((c,i)=>c);

  function createPie(ctxId,labels,counts,titleKey){
    if(charts[titleKey]) charts[titleKey].destroy();
    const total = counts.reduce((a,b)=>a+b,0)||1;
    charts[titleKey] = new Chart(
      document.getElementById(ctxId).getContext("2d"),
      {
        type:"pie",
        data:{
          labels,
          datasets:[{
            data:counts,
            backgroundColor:labels.map((_,i)=>palette[i % palette.length])
          }]
        },
        options:{
          plugins:{
            legend:{position:"bottom",labels:{color:"#e5e7eb",font:{size:10}}},
            tooltip:{
              callbacks:{
                label:(ctx)=>{
                  const v = ctx.parsed || 0;
                  const pct = (v*100/total).toFixed(1);
                  return `${ctx.label}: ${v.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢ (${pct}%)`;
                }
              }
            }
          }
        }
      }
    );
  }

  function createBar(ctxId,labels,counts,titleKey){
    if(charts[titleKey]) charts[titleKey].destroy();
    charts[titleKey] = new Chart(
      document.getElementById(ctxId).getContext("2d"),
      {
        type:"bar",
        data:{
          labels,
          datasets:[{
            data:counts,
            backgroundColor:labels.map((_,i)=>palette[i % palette.length])
          }]
        },
        options:{
          scales:{
            x:{ticks:{color:"#e5e7eb",font:{size:10}},grid:{display:false}},
            y:{ticks:{color:"#e5e7eb",font:{size:10}},grid:{color:"#1f2937"}}
          },
          plugins:{
            legend:{display:false},
            tooltip:{
              callbacks:{
                label:(ctx)=>`${ctx.parsed.y.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢`
              }
            }
          }
        }
      }
    );
  }

  function createLine(ctxId,labels,counts,titleKey){
    if(charts[titleKey]) charts[titleKey].destroy();
    charts[titleKey] = new Chart(
      document.getElementById(ctxId).getContext("2d"),
      {
        type:"line",
        data:{
          labels,
          datasets:[{
            data:counts,
            borderColor:"rgba(56,189,248,0.9)",
            backgroundColor:"rgba(56,189,248,0.25)",
            fill:true,
            tension:0.2,
            pointRadius:3
          }]
        },
        options:{
          scales:{
            x:{ticks:{color:"#e5e7eb",font:{size:9}},grid:{color:"#1f2937"}},
            y:{ticks:{color:"#e5e7eb",font:{size:10}},grid:{color:"#1f2937"}}
          },
          plugins:{
            legend:{display:false},
            tooltip:{
              callbacks:{
                label:(ctx)=>`${ctx.parsed.y.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢`
              }
            }
          }
        }
      }
    );
  }

  // ========= RENDER =========
  function renderAll(){
    const data = getFilteredEntities();
    renderKPI(data);
    renderLGTableAndCharts(data);
    renderFSStatus(data);
    renderOpinionAndAdjustment(data);
    renderAuditAndProgress(data);
  }

  function renderKPI(data){
    const total = data.length;
    document.getElementById("kpiTotalLG").textContent = total.toLocaleString("th-TH");

    // audit status
    const byAudit = countBy(data,"auditStatus");
    const notYet = byAudit["‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"] || 0;
    const doing  = byAudit["‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"] || 0;
    const done   = byAudit["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"] || 0;
    document.getElementById("kpiAuditStatus").textContent =
      `${notYet}/${doing}/${done}`;

    // adjusted
    const byAdj = countBy(data,"adjusted");
    const adjCount = byAdj["‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á"] || 0;
    document.getElementById("kpiAdjusted").textContent =
      adjCount.toLocaleString("th-TH");

    // clean opinion
    const byOp = countBy(data,"opinion");
    const clean = byOp["‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç"] || 0;
    document.getElementById("kpiCleanOpinion").textContent =
      clean.toLocaleString("th-TH");
  }

  function countBy(arr,field){
    const m = {};
    arr.forEach(e=>{
      const k = e[field] || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏";
      m[k] = (m[k]||0)+1;
    });
    return m;
  }

  function renderLGTableAndCharts(data){
    // Table
    const tbody = document.getElementById("tableLG");
    tbody.innerHTML = "";
    data.forEach(e=>{
      const tr = document.createElement("tr");
      tr.title = `${e.entity} ‚Äì ${e.fsStatus}, ${e.opinion}, ${e.auditStatus}`;
      tr.innerHTML = `
        <td>${e.province}</td>
        <td>${e.amphoe}</td>
        <td>${e.type}</td>
        <td>1</td>
      `;
      tbody.appendChild(tr);
    });

    // Pie by type
    const byType = countBy(data,"type");
    const typeLabels = Object.keys(byType);
    const typeCounts = typeLabels.map(k=>byType[k]);
    createPie("chartTypePie",typeLabels,typeCounts,"typePie");

    // Bar by province
    const byProvince = countBy(data,"province");
    const pLabels = Object.keys(byProvince);
    const pCounts = pLabels.map(k=>byProvince[k]);
    createBar("chartProvinceBar",pLabels,pCounts,"provinceBar");
  }

  function renderFSStatus(data){
    const byFS = countBy(data,"fsStatus");
    const labels = ["‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß","‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏ö","‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏á‡∏ö","‡∏™‡πà‡∏á‡∏á‡∏ö‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤"];
    const counts = labels.map(k=>byFS[k]||0);
    createPie("chartFSStatusPie",labels,counts,"fsPie");
    createBar("chartFSStatusBar",labels,counts,"fsBar");
  }

  function renderOpinionAndAdjustment(data){
    const byOp = countBy(data,"opinion");
    const opLabels = ["‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç","‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç","‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á"];
    const opCounts = opLabels.map(k=>byOp[k]||0);
    createPie("chartOpinionPie",
      opLabels.map(l=>{
        if(l==="‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç") return "‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç";
        if(l==="‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç") return "‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç";
        return "‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô";
      }),
      opCounts,
      "opinionPie"
    );

    const byAdj = countBy(data,"adjusted");
    const adjLabels = ["‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á","‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á"];
    const adjCounts = adjLabels.map(k=>byAdj[k]||0);
    createPie("chartAdjustmentPie",adjLabels,adjCounts,"adjustPie");
  }

  function renderAuditAndProgress(data){
    // audit status bar
    const byAudit = countBy(data,"auditStatus");
    const labels = ["‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö","‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"];
    const counts = labels.map(k=>byAudit[k]||0);
    createBar("chartAuditStatusBar",labels,counts,"auditBar");

    // progress line (‡πÉ‡∏ä‡πâ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î)
    const stages = [
      "‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏•‡πâ‡∏ß",
      "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",
      "‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏≥‡∏Å‡∏≤‡∏£",
      "‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏õ‡∏¥‡∏î‡∏ï‡∏£‡∏ß‡∏à",
      "‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏µ‡πâ‡πÅ‡∏à‡∏á",
      "‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
      "‡∏™‡πà‡∏á ‡∏ú‡∏≠‡∏Å ‡∏™‡∏≠‡∏ö‡∏ó‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô",
      "‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
      "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"
    ];
    const byProg = countBy(data,"progress");
    const pCounts = stages.map(s=>byProg[s]||0);
    createLine("chartProgressLine",stages,pCounts,"progressLine");
  }

  // ========= DATA ENTRY =========
  const form = document.getElementById("entryForm");
  form.addEventListener("submit",e=>{
    e.preventDefault();
    const obj = {
      province:document.getElementById("inProvince").value.trim() || "-",
      amphoe:document.getElementById("inAmphoe").value.trim() || "-",
      type:document.getElementById("inType").value,
      entity:document.getElementById("inEntity").value.trim() || "-",
      fsStatus:document.getElementById("inFSStatus").value,
      opinion:document.getElementById("inOpinion").value,
      adjusted:document.getElementById("inAdjusted").value,
      auditStatus:document.getElementById("inAuditStatus").value,
      progress:document.getElementById("inProgress").value
    };
    entities.push(obj);
    saveData();
    initFilters();
    renderAll();
    form.reset();
    alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤ Cash Board ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô localStorage)");
  });

  document.getElementById("btnResetData").addEventListener("click",()=>{
    if(!confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏°?")) return;
    entities = defaultData.slice();
    saveData();
    initFilters();
    renderAll();
  });

  // ========= INIT =========
  loadData();
  initFilters();
  renderAll();
</script>

</body>
</html>