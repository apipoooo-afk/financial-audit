<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>FA Cash Board | Financial Audit System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- ‡πÉ‡∏ä‡πâ Chart.js ‡∏à‡∏≤‡∏Å CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --bg:#060818;
      --card:#11152b;
      --card-soft:#161b3b;
      --accent:#fdd835;
      --accent2:#42a5f5;
      --accent3:#66bb6a;
      --accent4:#ef5350;
      --muted:#a3acc7;
      --border:#262b46;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:"Segoe UI",Arial,sans-serif;
      background:
        radial-gradient(circle at 10% 0%, rgba(123,30,60,0.36) 0, transparent 55%),
        radial-gradient(circle at 90% 100%, rgba(66,165,245,0.32) 0, transparent 55%),
        var(--bg);
      color:#f5f7ff;
    }

    header{
      padding:16px 14px 14px;
      background:linear-gradient(120deg,#0d47a1,#6f42c1,#20c997);
      box-shadow:0 4px 16px rgba(0,0,0,0.55);
      position:sticky;
      top:0;
      z-index:20;
    }
    .h-inner{
      max-width:1200px;
      margin:0 auto;
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
    }
    .h-title{
      font-size:24px;
      font-weight:800;
    }
    .h-sub{
      font-size:13px;
      opacity:.9;
      margin-top:4px;
    }
    .h-tags{
      font-size:11px;
      opacity:.9;
      margin-top:2px;
    }
    .h-right{
      display:flex;
      flex-direction:column;
      gap:6px;
      align-items:flex-end;
      min-width:220px;
    }
    .tag-pill{
      font-size:12px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.5);
      background:rgba(0,0,0,.15);
    }
    .dt-box{
      font-size:12px;
      background:rgba(0,0,0,.25);
      padding:6px 10px;
      border-radius:10px;
    }
    .dt-row{
      display:flex;
      gap:6px;
      align-items:center;
    }

    main{
      max-width:1200px;
      margin:16px auto 40px;
      padding:0 14px 60px;
    }

    .top-bar{
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
      font-size:13px;
      color:var(--muted);
    }

    /* NAV BUTTONS */
    .nav-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:12px;
    }
    .btn-nav{
      border:none;
      border-radius:999px;
      padding:6px 12px;
      font-size:12px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      background:rgba(15,23,42,.9);
      color:#e0f2fe;
      border:1px solid rgba(148,163,184,.7);
    }
    .btn-nav:hover{
      background:rgba(30,64,175,.95);
    }

    /* FILTER BAR */
    .filter-bar{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin:10px 0 14px;
      font-size:13px;
    }
    .filter-group{
      display:flex;
      flex-direction:column;
      gap:3px;
      min-width:130px;
    }
    .filter-group label{
      color:var(--muted);
    }
    select{
      padding:6px 8px;
      border-radius:8px;
      border:1px solid var(--border);
      background:#020617;
      color:#e5e7eb;
      font-size:13px;
    }

    /* SUMMARY CARDS */
    .summary-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(210px,1fr));
      gap:12px;
      margin-bottom:16px;
    }
    .summary-card{
      background:var(--card);
      border-radius:16px;
      padding:10px 12px;
      border:1px solid rgba(148,163,184,.3);
      box-shadow:0 8px 20px rgba(15,23,42,.85);
      position:relative;
      overflow:hidden;
      cursor:default;
    }
    .summary-card::after{
      content:"";
      position:absolute;
      right:-20px;
      top:-20px;
      width:70px;
      height:70px;
      border-radius:50%;
      background:rgba(255,255,255,0.05);
    }
    .sc-label{
      font-size:12px;
      color:var(--muted);
      margin-bottom:4px;
    }
    .sc-value{
      font-size:20px;
      font-weight:800;
    }
    .sc-sub{
      font-size:11px;
      color:var(--muted);
      margin-top:4px;
    }
    .sc-tag{
      font-size:11px;
      margin-top:6px;
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      background:rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.5);
      color:#e0f2fe;
    }

    /* tooltip ‡πÅ‡∏ö‡∏ö hover */
    .summary-card[data-tip]:hover::before{
      content:attr(data-tip);
      position:absolute;
      left:10px;
      bottom:8px;
      max-width:260px;
      background:rgba(15,23,42,.97);
      border-radius:8px;
      padding:6px 8px;
      font-size:11px;
      color:#e5e7eb;
      box-shadow:0 6px 14px rgba(0,0,0,.7);
      z-index:5;
      white-space:normal;
    }

    /* CHARTS */
    .chart-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:14px;
      margin-bottom:18px;
    }
    .chart-card{
      background:var(--card-soft);
      border-radius:16px;
      padding:10px 10px 14px;
      border:1px solid rgba(148,163,184,.35);
      box-shadow:0 10px 22px rgba(15,23,42,.9);
    }
    .chart-title{
      font-size:13px;
      margin-bottom:4px;
    }
    .chart-sub{
      font-size:11px;
      color:var(--muted);
      margin-bottom:4px;
    }
    .chart-wrap{
      position:relative;
      height:240px;
    }

    /* TABLE */
    .table-card{
      background:var(--card);
      border-radius:16px;
      padding:10px 10px 14px;
      border:1px solid rgba(148,163,184,.35);
      box-shadow:0 10px 22px rgba(15,23,42,.9);
    }
    .table-head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:6px;
      font-size:13px;
    }
    .table-head-right{
      font-size:11px;
      color:var(--muted);
    }
    .table-search{
      margin-bottom:8px;
      display:flex;
      gap:6px;
      flex-wrap:wrap;
      font-size:13px;
    }
    .table-search input{
      padding:6px 8px;
      border-radius:8px;
      border:1px solid var(--border);
      background:#020617;
      color:#e5e7eb;
      min-width:180px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      font-size:11px;
    }
    thead{
      background:#020617;
    }
    th,td{
      padding:5px 6px;
      border-bottom:1px solid rgba(31,41,55,.9);
      text-align:left;
      white-space:nowrap;
    }
    th{
      position:sticky;
      top:0;
      z-index:5;
    }
    tbody tr:nth-child(even){
      background:#0b1024;
    }
    tbody tr:hover{
      background:#1e293b;
    }
    .col-code{font-family:monospace;}
    .link-small a{
      color:#93c5fd;
      text-decoration:none;
    }
    .link-small a:hover{
      text-decoration:underline;
    }

    /* ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• / ‡∏Å‡∏•‡∏±‡∏ö */
    .bottom-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:12px;
      font-size:12px;
    }
    .btn-secondary{
      border-radius:999px;
      border:1px solid rgba(148,163,184,.7);
      background:#020617;
      color:#e0f2fe;
      padding:6px 10px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      text-decoration:none;
    }
    .btn-secondary:hover{
      background:#111827;
    }

    @media(max-width:768px){
      .h-inner{flex-direction:column;align-items:flex-start;}
      .h-right{align-items:flex-start;}
    }
  </style>
</head>
<body>

<header>
  <div class="h-inner">
    <div>
      <div class="h-title">üìà FA Cash Board ‚Äì ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Å‡∏•‡∏≤‡∏á</div>
      <div class="h-sub">
        ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á ‡∏≠‡∏õ‡∏ó. (<code>localStorage["fa-db-data-gov"]</code>) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®
      </div>
      <div class="h-tags">
        ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà 4 ‚Ä¢ ‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏¥‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©
      </div>
    </div>
    <div class="h-right">
      <div class="tag-pill">Real-time view (front-end only)</div>
      <div class="dt-box">
        <div class="dt-row">üìÖ <span id="thaiDate">--</span></div>
        <div class="dt-row">üïí <span id="thaiTime">--:--:--</span> ‡∏ô.</div>
      </div>
    </div>
  </div>
</header>

<main>
  <div class="top-bar">
    <span>üìå ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á <code>fa-db-data-gov</code> ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô localStorage ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤ 0 ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</span>
    <span>üß© ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ FA DB ‡πÅ‡∏•‡πâ‡∏ß refresh ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ</span>
  </div>

  <!-- NAV ‡πÄ‡∏°‡∏ô‡∏π‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô -->
  <div class="nav-row">
    <button class="btn-nav" onclick="location.href='index.html'">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Portal)</button>
    <button class="btn-nav" onclick="location.href='fa-menu.html'">üìÇ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (FA)</button>
    <button class="btn-nav" onclick="location.href='fa-review-login.html'">üßÆ ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ó‡∏≤‡∏ô</button>
    <button class="btn-nav" onclick="location.href='fa-tracking.html'">üìå ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•</button>
    <button class="btn-nav" onclick="location.href='fa-chatbot.html'">ü§ñ Chatbot FA</button>
    <button class="btn-nav" onclick="location.href='fa-db-data-gov.html'">üóÑ ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á ‡∏≠‡∏õ‡∏ó.</button>
  </div>

  <!-- FILTER -->
  <div class="filter-bar">
    <div class="filter-group">
      <label for="filterProvince">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (Province)</label>
      <select id="filterProvince">
        <option value="">‡∏ó‡∏∏‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
      </select>
    </div>
    <div class="filter-group">
      <label for="filterType">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡∏≠‡∏õ‡∏ó. (Type)</label>
      <select id="filterType">
        <option value="">‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
      </select>
    </div>
    <div class="filter-group">
      <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÉ‡∏ô‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</label>
      <div id="filterCount" style="font-size:13px;color:#e5e7eb;">- ‡∏´‡∏ô‡πà‡∏ß‡∏¢</div>
    </div>
  </div>

  <!-- SUMMARY CARDS -->
  <div class="summary-grid">
    <div class="summary-card" id="cardTotalUnits"
         data-tip="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ ‡∏≠‡∏õ‡∏ó. ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á fa-db-data-gov (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î + ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ‡πÅ‡∏•‡πâ‡∏ß)">
      <div class="sc-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏≠‡∏õ‡∏ó. ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏£‡∏≠‡∏á)</div>
      <div class="sc-value" id="scTotalUnits">0</div>
      <div class="sc-sub" id="scTotalUnitsSub">‡∏û‡∏ö 0 ‡∏´‡∏ô‡πà‡∏ß‡∏¢</div>
      <div class="sc-tag">1.1 Total LG Units</div>
    </div>

    <div class="summary-card" id="cardProvince"
         data-tip="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏ô‡πà‡∏ß‡∏¢ ‡∏≠‡∏õ‡∏ó. ‡πÉ‡∏ô‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ ‡πÄ‡∏ä‡πà‡∏ô ‡∏ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î">
      <div class="sc-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
      <div class="sc-value" id="scProvinceCount">0</div>
      <div class="sc-sub" id="scProvinceSub">-</div>
      <div class="sc-tag">By Province</div>
    </div>

    <div class="summary-card"
         data-tip="‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 1.2 / 1.3 / 1.4 ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏° field ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‡πÄ‡∏ä‡πà‡∏ô fsStatus, fsOpinion, fsAdjusted ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ô‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥">
      <div class="sc-label">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (demo)</div>
      <div class="sc-value" id="scFsStatus">0 / 0</div>
      <div class="sc-sub" id="scFsStatusSub">‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß / ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏ö (‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏à‡∏≤‡∏Å field ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)</div>
      <div class="sc-tag">1.2 ‚Äì 1.4 FS Status</div>
    </div>

    <div class="summary-card"
         data-tip="‡∏´‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏° field progressStep (open, doc, wp, closeMeeting, explain, report, qaReview, reportSent, followUp) ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô mini KPI tracking ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢">
      <div class="sc-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (demo)</div>
      <div class="sc-value" id="scAuditProgress">0%</div>
      <div class="sc-sub" id="scAuditProgressSub">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ / ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      <div class="sc-tag">1.5 ‚Äì 1.6 Audit Progress</div>
    </div>
  </div>

  <!-- CHARTS -->
  <div class="chart-grid">
    <div class="chart-card">
      <div class="chart-title">‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô ‡∏≠‡∏õ‡∏ó. ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</div>
      <div class="chart-sub">
        ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 1.1 (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ‡∏Å‡∏ó‡∏°, ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏û‡∏±‡∏ó‡∏¢‡∏≤, ‡∏≠‡∏ö‡∏à., ‡∏ó‡∏ô., ‡∏ó‡∏ï., ‡∏≠‡∏ö‡∏ï. ‡∏Ø‡∏•‡∏Ø) ‚Äì ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å field <code>type / ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</code>
      </div>
      <div class="chart-wrap">
        <canvas id="chartTypePie"></canvas>
      </div>
    </div>

    <div class="chart-card">
      <div class="chart-title">Top ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏≠‡∏õ‡∏ó. ‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î</div>
      <div class="chart-sub">
        ‡πÅ‡∏™‡∏î‡∏á 10 ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÅ‡∏£‡∏Å (‡∏ï‡∏≤‡∏°‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏£‡∏≠‡∏á) ‚Äì ‡πÉ‡∏ä‡πâ field <code>province / ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</code>
      </div>
      <div class="chart-wrap">
        <canvas id="chartProvinceBar"></canvas>
      </div>
    </div>
  </div>

  <!-- TABLE -->
  <div class="table-card">
    <div class="table-head">
      <div>üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à / ‡∏≠‡∏õ‡∏ó. (‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á)</div>
      <div class="table-head-right" id="tableInfo">‡πÅ‡∏™‡∏î‡∏á 0 ‡∏à‡∏≤‡∏Å 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
    </div>

    <div class="table-search">
      <span>üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢ / ‡∏£‡∏´‡∏±‡∏™</span>
      <input type="text" id="tableSearchInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠ ‡∏≠‡∏õ‡∏ó. ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™...">
    </div>

    <div style="max-height:360px;overflow:auto;border-radius:12px;border:1px solid rgba(15,23,42,.9);">
      <table>
        <thead>
          <tr>
            <th style="width:40px;">#</th>
            <th>‡∏£‡∏´‡∏±‡∏™</th>
            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            <th>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</th>
            <th>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</th>
            <th>‡∏ï‡∏≥‡∏ö‡∏•</th>
            <th>‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô</th>
            <th>‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</th>
            <th>‡∏•‡∏¥‡∏á‡∏Å‡πå</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <!-- ‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JS -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á -->
  <div class="bottom-row">
    <a class="btn-secondary" href="fa-db-data-gov.html">
      üóÑ ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‡∏≠‡∏õ‡∏ó. (FA DB)
    </a>
    <a class="btn-secondary" href="index.html">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Portal)</a>
  </div>

</main>

<script>
  /* ========= Date / Time ‡πÑ‡∏ó‡∏¢ ========= */
  function updateThaiDateTime(){
    const now = new Date();
    const thMonths = [
      "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå","‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°","‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô","‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°","‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô",
      "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°","‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô","‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°","‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô","‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"
    ];
    const d = now.getDate();
    const m = now.getMonth();
    const y = now.getFullYear() + 543;
    document.getElementById("thaiDate").textContent =
      d + " " + thMonths[m] + " ‡∏û.‡∏®. " + y;
    const hh = String(now.getHours()).padStart(2,"0");
    const mm = String(now.getMinutes()).padStart(2,"0");
    const ss = String(now.getSeconds()).padStart(2,"0");
    document.getElementById("thaiTime").textContent = `${hh}:${mm}:${ss}`;
  }
  updateThaiDateTime();
  setInterval(updateThaiDateTime,1000);

  /* ========= Utility: ‡∏î‡∏∂‡∏á field ‡πÅ‡∏ö‡∏ö‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ó‡∏¢/‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ========= */
  function getField(row, keys, fallback=""){
    if(!row) return fallback;
    for(const k of keys){
      if(row[k] !== undefined && row[k] !== null && row[k] !== ""){
        return row[k];
      }
    }
    return fallback;
  }

  /* ========= ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage["fa-db-data-gov"] ========= */
  let rawData = [];
  function loadCentralData(){
    try{
      const raw = localStorage.getItem("fa-db-data-gov");
      const arr = raw ? JSON.parse(raw) : [];
      rawData = Array.isArray(arr) ? arr : [];
    }catch(e){
      rawData = [];
    }

    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏•‡∏¢ ‡∏•‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤ (‡πÄ‡∏û‡∏∑‡πà‡∏≠ demo)
    if(rawData.length === 0){
      rawData = [
        {
          code:"LG-001",
          name:"‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á",
          unit:"‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á",
          type:"‡∏ó‡∏ô.",
          province:"‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©",
          district:"‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©",
          subdistrict:"‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏£‡∏Å",
          village:"‡∏´‡∏°‡∏π‡πà 1",
          website:"https://example.go.th",
          detailUrl:"#",
          // field ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 1.2‚Äì1.6
          fsStatus:"closed",             // closed / notClosed / late / notSubmitted
          fsOpinion:"qualified",         // unqualified / qualified / adverse / disclaimer
          fsAdjusted:true,               // ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
          auditStatus:"completed",       // notStarted / inProgress / completed
          progressStep:"followUp"        // open/doc/wp/closeMeeting/explain/report/qaReview/reportSent/followUp
        },
        {
          code:"LG-002",
          name:"‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏≥‡∏ö‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á",
          unit:"‡∏≠‡∏ö‡∏ï.‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á",
          type:"‡∏≠‡∏ö‡∏ï.",
          province:"‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©",
          district:"‡∏Å‡∏±‡∏ô‡∏ó‡∏£‡∏≤‡∏£‡∏°‡∏¢‡πå",
          subdistrict:"‡∏´‡∏ô‡∏≠‡∏á‡∏ú‡∏∑‡∏≠",
          village:"‡∏´‡∏°‡∏π‡πà 3",
          website:"",
          detailUrl:"#",
          fsStatus:"notClosed",
          fsOpinion:"unqualified",
          fsAdjusted:false,
          auditStatus:"inProgress",
          progressStep:"wp"
        }
      ];
    }
  }

  /* ========= Filters ========= */
  const filterProvinceEl = document.getElementById("filterProvince");
  const filterTypeEl = document.getElementById("filterType");
  const filterCountEl = document.getElementById("filterCount");
  const tableSearchInput = document.getElementById("tableSearchInput");

  function buildFilterOptions(){
    const provinces = new Set();
    const types = new Set();

    rawData.forEach(row=>{
      const p = getField(row,["province","‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î"]);
      const t = getField(row,["type","‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"]);
      if(p) provinces.add(p);
      if(t) types.add(t);
    });

    [...provinces].sort().forEach(p=>{
      const opt = document.createElement("option");
      opt.value = p;
      opt.textContent = p;
      filterProvinceEl.appendChild(opt);
    });

    [...types].sort().forEach(t=>{
      const opt = document.createElement("option");
      opt.value = t;
      opt.textContent = t;
      filterTypeEl.appendChild(opt);
    });
  }

  function getFilteredData(){
    const p = filterProvinceEl.value;
    const t = filterTypeEl.value;
    const keyword = tableSearchInput.value.trim().toLowerCase();

    return rawData.filter(row=>{
      const rrProvince = getField(row,["province","‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î"]);
      const rrType     = getField(row,["type","‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"]);
      const code       = String(getField(row,["code","‡∏£‡∏´‡∏±‡∏™"],"")).toLowerCase();
      const name       = String(getField(row,["name","‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô","unit","‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à"],"")).toLowerCase();

      if(p && rrProvince !== p) return false;
      if(t && rrType !== t) return false;

      if(keyword){
        if(!code.includes(keyword) && !name.includes(keyword)) return false;
      }
      return true;
    });
  }

  /* ========= Summary / KPI ========= */
  function updateSummary(filtered){
    const total = filtered.length;
    filterCountEl.textContent = `${total.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢`;

    // 1) Total units
    document.getElementById("scTotalUnits").textContent = total.toLocaleString("th-TH");
    document.getElementById("scTotalUnitsSub").textContent = `‡∏û‡∏ö ${total.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á`;

    // 2) Province count
    const provinces = new Set();
    filtered.forEach(r=>{
      const p = getField(r,["province","‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î"]);
      if(p) provinces.add(p);
    });
    const pvCount = provinces.size;
    document.getElementById("scProvinceCount").textContent = pvCount.toLocaleString("th-TH");
    document.getElementById("scProvinceSub").textContent =
      pvCount>0 ? `‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô ${pvCount.toLocaleString("th-TH")} ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î` : "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÉ‡∏ô‡∏ä‡∏∏‡∏î‡∏ô‡∏µ‡πâ";

    // 3) FS Status demo (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ field fsStatus ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á)
    let closed=0, notClosed=0;
    filtered.forEach(r=>{
      const s = getField(r,["fsStatus"],"");
      if(s==="closed") closed++;
      else if(s==="notClosed" || s==="late" || s==="notSubmitted") notClosed++;
    });
    document.getElementById("scFsStatus").textContent =
      `${closed.toLocaleString("th-TH")} / ${notClosed.toLocaleString("th-TH")}`;
    document.getElementById("scFsStatusSub").textContent =
      `‡∏õ‡∏¥‡∏î‡∏á‡∏ö‡πÅ‡∏•‡πâ‡∏ß ${closed.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢ | ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î/‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤ ${notClosed.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢`;

    // 4) Audit progress demo ‚Äì ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà progressStep = followUp ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
    let done=0;
    filtered.forEach(r=>{
      const step = getField(r,["progressStep"],"");
      if(step==="followUp" || step==="reportSent") done++;
    });
    const pct = total>0 ? (done*100/total) : 0;
    document.getElementById("scAuditProgress").textContent = `${pct.toFixed(1)}%`;
    document.getElementById("scAuditProgressSub").textContent =
      `‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß ${done.toLocaleString("th-TH")} / ${total.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡∏ï‡∏≤‡∏° field progressStep)`;
  }

  /* ========= Chart.js ========= */
  let chartTypePie = null;
  let chartProvinceBar = null;

  function buildCharts(filtered){
    const ctxType = document.getElementById("chartTypePie");
    const ctxProv = document.getElementById("chartProvinceBar");
    if(!ctxType || !ctxProv || !window.Chart) return;

    // ‡∏ô‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
    const typeMap = {};
    filtered.forEach(r=>{
      const t = getField(r,["type","‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"],"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏");
      typeMap[t] = (typeMap[t] || 0) + 1;
    });
    const typeLabels = Object.keys(typeMap);
    const typeValues = typeLabels.map(k=>typeMap[k]);

    if(chartTypePie) chartTypePie.destroy();
    chartTypePie = new Chart(ctxType,{
      type:"pie",
      data:{
        labels:typeLabels,
        datasets:[{data:typeValues}]
      },
      options:{
        plugins:{
          legend:{position:"bottom",labels:{font:{size:11}}},
          tooltip:{callbacks:{
            label:(ctx)=>{
              const label = ctx.label || "";
              const value = ctx.raw || 0;
              const total = typeValues.reduce((a,b)=>a+b,0)||1;
              const pct = (value*100/total).toFixed(1);
              return `${label}: ${value.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢ (${pct}%)`;
            }
          }}
        }
      }
    });

    // ‡∏ô‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (top 10)
    const pvMap = {};
    filtered.forEach(r=>{
      const p = getField(r,["province","‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î"],"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏");
      pvMap[p] = (pvMap[p] || 0) + 1;
    });
    const pvArr = Object.entries(pvMap).sort((a,b)=>b[1]-a[1]).slice(0,10);
    const pvLabels = pvArr.map(([k])=>k);
    const pvValues = pvArr.map(([,v])=>v);

    if(chartProvinceBar) chartProvinceBar.destroy();
    chartProvinceBar = new Chart(ctxProv,{
      type:"bar",
      data:{
        labels:pvLabels,
        datasets:[{data:pvValues}]
      },
      options:{
        scales:{
          x:{ticks:{font:{size:10}}},
          y:{beginAtZero:true}
        },
        plugins:{
          legend:{display:false},
          tooltip:{callbacks:{
            label:(ctx)=>{
              const value = ctx.raw || 0;
              return `${value.toLocaleString("th-TH")} ‡∏´‡∏ô‡πà‡∏ß‡∏¢`;
            }
          }}
        }
      }
    });
  }

  /* ========= Table ========= */
  const tableBody = document.getElementById("tableBody");
  const tableInfo = document.getElementById("tableInfo");

  function renderTable(filtered){
    tableBody.innerHTML = "";
    const total = filtered.length;
    const limit = 200; // ‡∏Å‡∏±‡∏ô table ‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
    const showArr = filtered.slice(0,limit);

    showArr.forEach((row,idx)=>{
      const tr = document.createElement("tr");
      const code = getField(row,["code","‡∏£‡∏´‡∏±‡∏™"],"-");
      const name = getField(row,["name","‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô","unit","‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à"],"-");
      const type = getField(row,["type","‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"],"-");
      const province = getField(row,["province","‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î"],"-");
      const district = getField(row,["district","‡∏≠‡∏≥‡πÄ‡∏†‡∏≠","‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï","‡πÄ‡∏Ç‡∏ï"],"-");
      const subdistrict = getField(row,["subdistrict","‡∏ï‡∏≥‡∏ö‡∏•","‡πÅ‡∏Ç‡∏ß‡∏á"],"-");
      const village = getField(row,["village","‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô","‡∏ä‡∏∏‡∏°‡∏ä‡∏ô"],"-");
      const website = getField(row,["website","‡πÄ‡∏ß‡πá‡∏ö","url"],"");
      const detailUrl = getField(row,["detailUrl","link","‡∏•‡∏¥‡∏á‡∏Å‡πå"],"");

      tr.innerHTML = `
        <td>${idx+1}</td>
        <td class="col-code">${code}</td>
        <td>${name}</td>
        <td>${type}</td>
        <td>${province}</td>
        <td>${district}</td>
        <td>${subdistrict}</td>
        <td>${village}</td>
        <td class="link-small">
          ${website ? `<a href="${website}" target="_blank">‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö</a>` : "-"}
        </td>
        <td class="link-small">
          ${detailUrl ? `<a href="${detailUrl}" target="_blank">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>` : "-"}
        </td>
      `;
      tableBody.appendChild(tr);
    });

    tableInfo.textContent =
      `‡πÅ‡∏™‡∏î‡∏á ${showArr.length.toLocaleString("th-TH")} ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${total.toLocaleString("th-TH")} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
  }

  /* ========= main refresh ========= */
  function refreshAll(){
    const filtered = getFilteredData();
    updateSummary(filtered);
    buildCharts(filtered);
    renderTable(filtered);
  }

  /* ========= Init ========= */
  loadCentralData();
  buildFilterOptions();
  refreshAll();

  filterProvinceEl.addEventListener("change",refreshAll);
  filterTypeEl.addEventListener("change",refreshAll);
  tableSearchInput.addEventListener("input",refreshAll);
</script>

</body>
</html>
