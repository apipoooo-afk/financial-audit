<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>FA DB | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  :root{
    --bg:#060818;
    --card:#11152b;
    --border:#262b46;
    --accent:#42a5f5;
    --accent2:#22c55e;
    --muted:#a3acc7;
    --text:#f5f7ff;
  }
  *{box-sizing:border-box;}

  body{
    margin:0;
    font-family:"Segoe UI",Tahoma,sans-serif;
    background:
      radial-gradient(circle at 10% 0%, rgba(123,30,60,0.36) 0, transparent 55%),
      radial-gradient(circle at 90% 100%, rgba(66,165,245,0.32) 0, transparent 55%),
      var(--bg);
    color:var(--text);
  }

  header{
    padding:18px 12px;
    text-align:center;
    background:linear-gradient(120deg,#0d47a1,#6f42c1,#22c55e);
    box-shadow:0 4px 18px rgba(0,0,0,.7);
  }
  header h1{margin:0;font-size:22px;font-weight:800;}
  header p{margin:4px 0 0;font-size:13px;color:var(--muted);}

  .wrap{
    max-width:960px;
    margin:20px auto 26px;
    padding:0 16px;
  }

  .top-row{
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:8px;
    font-size:13px;
    color:var(--muted);
    margin-bottom:10px;
  }

  .chip{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:3px 10px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.6);
    background:rgba(15,23,42,.9);
    font-size:12px;
  }

  .card{
    background:var(--card);
    border-radius:18px;
    border:1px solid rgba(255,255,255,.12);
    padding:16px 16px 14px;
    margin-bottom:16px;
    box-shadow:0 8px 22px rgba(0,0,0,.72);
  }

  h2{
    margin:0 0 8px;
    font-size:18px;
    font-weight:700;
  }
  h3{
    margin:16px 0 6px;
    font-size:15px;
    font-weight:600;
    color:#e5e7eb;
  }

  .row{
    display:flex;
    flex-wrap:wrap;
    gap:8px 16px;
    font-size:14px;
    margin-bottom:4px;
  }
  .label{
    width:160px;
    color:var(--muted);
  }
  .value{
    flex:1;
  }

  .nav{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:8px 14px;
    margin-right:8px;
    border-radius:999px;
    text-decoration:none;
    background:#111827;
    border:1px solid #374151;
    color:#e5e7eb;
    font-size:13px;
  }

  .btn-link{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid #38bdf8;
    color:#e0f2fe;
    text-decoration:none;
    font-size:12px;
  }
  .btn-link:hover{
    background:#38bdf8;
    color:#0b1120;
  }

  .pill{
    display:inline-flex;
    align-items:center;
    gap:4px;
    padding:3px 9px;
    border-radius:999px;
    font-size:11px;
    border:1px solid rgba(148,163,184,.6);
    background:#020617;
    color:#e5e7eb;
  }

  @media(max-width:600px){
    .label{width:120px;}
  }
</style>
</head>

<body>

<header>
  <h1>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à / ‡∏≠‡∏õ‡∏ó.</h1>
  <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á fa-db-data-gov</p>
</header>

<div class="wrap">

  <div class="top-row">
    <div>
      ‚è± ‡πÄ‡∏ß‡∏•‡∏≤: <span id="nowTime">-</span><br>
      üîë code: <span id="codeText">-</span>
    </div>
    <div>
      <span class="chip">
        üì¶ localStorage: <code style="font-size:11px;">fa-db-data-gov</code>
      </span>
    </div>
  </div>

  <div id="notFound" class="card" style="display:none;">
    <h2>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à</h2>
    <p style="font-size:14px;color:var(--muted);">
      ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö code ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå<br>
      ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á
    </p>
    <a href="fa-lg-search.html" class="nav">üîç ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</a>
    <a href="fa-db-data-gov.html" class="nav">üìä ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á</a>
  </div>

  <div id="detailCard" class="card" style="display:none;">

    <h2 id="nameMain">-</h2>
    <div style="font-size:13px;color:var(--muted);margin-bottom:10px;">
      ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à: <span id="unitText">-</span> ¬∑ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: <span id="typeText">-</span>
    </div>

    <div class="row">
      <div class="label">‡∏£‡∏´‡∏±‡∏™‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</div>
      <div class="value" id="codeValue">-</div>
    </div>

    <div class="row">
      <div class="label">‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á</div>
      <div class="value" id="ministryValue">-</div>
    </div>

    <div class="row">
      <div class="label">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</div>
      <div class="value" id="levelValue">-</div>
    </div>

    <h3>‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á / ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</h3>

    <div class="row">
      <div class="label">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</div>
      <div class="value" id="provinceValue">-</div>
    </div>
    <div class="row">
      <div class="label">‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ / ‡πÄ‡∏Ç‡∏ï</div>
      <div class="value" id="districtValue">-</div>
    </div>
    <div class="row">
      <div class="label">‡∏ï‡∏≥‡∏ö‡∏• / ‡πÅ‡∏Ç‡∏ß‡∏á</div>
      <div class="value" id="subdistrictValue">-</div>
    </div>
    <div class="row">
      <div class="label">‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô / ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</div>
      <div class="value" id="villageValue">-</div>
    </div>
    <div class="row">
      <div class="label">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà / ‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà</div>
      <div class="value" id="addressValue">-</div>
    </div>
    <div class="row">
      <div class="label">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå</div>
      <div class="value" id="zipcodeValue">-</div>
    </div>

    <div class="row">
      <div class="label">‡∏û‡∏¥‡∏Å‡∏±‡∏î (LAT, LONG)</div>
      <div class="value">
        <span id="latlongValue">-</span>
      </div>
    </div>

    <div class="row">
      <div class="label">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</div>
      <div class="value" id="mapLinkSlot">
        -
      </div>
    </div>

    <h3>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏® / ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</h3>

    <div class="row">
      <div class="label">‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</div>
      <div class="value" id="websiteValue">-</div>
    </div>

    <div class="row">
      <div class="label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</div>
      <div class="value" id="remarkValue">-</div>
    </div>

    <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô</h3>
    <div style="font-size:13px;">
      <span class="pill">‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö FA</span>
      <span class="pill">Tracking</span>
      <span class="pill">Review</span>
      <span class="pill">Learning</span>
      <span class="pill">Cash Board</span>
    </div>

  </div>

  <div style="margin-top:10px;">
    <a href="fa-lg-search.html" class="nav">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>
    <a href="fa-db-data-gov.html" class="nav">üìä ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á</a>
    <a href="fa-lg-add.html" class="nav">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>
    <a href="fa-lg-edit.html" class="nav">üõ† ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>
  </div>

</div>

<script>
function updateClock(){
  const el = document.getElementById("nowTime");
  if(!el) return;
  el.textContent = new Date().toLocaleString("th-TH");
}
setInterval(updateClock,1000); updateClock();

function getCodeFromQuery(){
  const p = new URLSearchParams(location.search);
  return p.get("code");
}

function loadDB(){
  try{
    return JSON.parse(localStorage.getItem("fa-db-data-gov") || "[]");
  }catch(e){
    return [];
  }
}

function createGoogleMapsLink(row){
  const lat = (row.lat || row.LAT || "").toString().trim();
  const lng = (row.long || row.LONG || "").toString().trim();

  if(lat && lng){
    const url = `https://www.google.com/maps?q=${encodeURIComponent(lat+","+lng)}`;
    return {
      text:`‡∏î‡∏π‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î (${lat}, ${lng})`,
      url
    };
  }

  const parts = [
    row.name || "",
    row.unit || "",
    row.subdistrict || "",
    row.district || "",
    row.province || ""
  ].filter(Boolean);

  if(parts.length===0) return null;

  const q = parts.join(" ");
  const url = `https://www.google.com/maps/search/${encodeURIComponent(q)}`;
  return {
    text:`‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢: ${q}`,
    url
  };
}

function renderDetail(row){
  document.getElementById("detailCard").style.display = "";
  document.getElementById("notFound").style.display = "none";

  document.getElementById("nameMain").textContent = row.name || "-";
  document.getElementById("unitText").textContent = row.unit || row.name || "-";
  document.getElementById("typeText").textContent = row.type || "-";

  document.getElementById("codeValue").textContent      = row.code || "-";
  document.getElementById("ministryValue").textContent  = row.ministry || "-";
  document.getElementById("levelValue").textContent     = row.level || "-";

  document.getElementById("provinceValue").textContent   = row.province || "-";
  document.getElementById("districtValue").textContent   = row.district || "-";
  document.getElementById("subdistrictValue").textContent= row.subdistrict || "-";
  document.getElementById("villageValue").textContent    = row.village || "-";
  document.getElementById("addressValue").textContent    = row.address || row.moo || "-";
  document.getElementById("zipcodeValue").textContent    = row.zipcode || "-";

  const lat = row.lat || row.LAT || "";
  const lng = row.long || row.LONG || "";
  if(lat || lng){
    document.getElementById("latlongValue").textContent = `${lat || "?"}, ${lng || "?"}`;
  }else{
    document.getElementById("latlongValue").textContent = "-";
  }

  const mapSlot = document.getElementById("mapLinkSlot");
  mapSlot.innerHTML = "-";
  const m = createGoogleMapsLink(row);
  if(m){
    const a = document.createElement("a");
    a.href = m.url;
    a.target = "_blank";
    a.className = "btn-link";
    a.textContent = "‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Google Maps";
    mapSlot.innerHTML = "";
    mapSlot.appendChild(a);
  }

  const web = row.website || "";
  const webEl = document.getElementById("websiteValue");
  if(web){
    webEl.innerHTML = `<a href="${web}" target="_blank" class="btn-link">‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</a><br><span style="font-size:12px;color:var(--muted);">${web}</span>`;
  }else{
    webEl.textContent = "-";
  }

  document.getElementById("remarkValue").textContent = row.remark || "-";
}

function showNotFound(){
  document.getElementById("detailCard").style.display = "none";
  document.getElementById("notFound").style.display = "";
}

(function init(){
  const code = getCodeFromQuery();
  document.getElementById("codeText").textContent = code || "-";

  if(!code){
    showNotFound();
    return;
  }

  const db = loadDB();
  const row = db.find(r => String(r.code) === String(code));

  if(!row){
    showNotFound();
    return;
  }

  renderDetail(row);
})();
</script>

</body>
</html>
