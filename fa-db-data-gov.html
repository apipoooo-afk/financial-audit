<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>FA DB | fa-db-data-gov ‚Äì ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏≠‡∏õ‡∏ó. ‡∏Å‡∏•‡∏≤‡∏á</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root{
    --bg:#060818;
    --card:#11152b;
    --border:#262b46;
    --accent:#42a5f5;
    --accent2:#22c55e;
    --muted:#a3acc7;
    --text:#f5f7ff;
  }
  *{box-sizing:border-box;}
  body{
    margin:0;
    font-family:"Segoe UI",Tahoma,sans-serif;
    background:
      radial-gradient(circle at 10% 0%, rgba(123,30,60,0.36) 0, transparent 55%),
      radial-gradient(circle at 90% 100%, rgba(66,165,245,0.32) 0, transparent 55%),
      var(--bg);
    color:var(--text);
  }
  header{
    padding:18px 12px 14px;
    text-align:center;
    background:linear-gradient(120deg,#0d47a1,#6f42c1,#22c55e);
    box-shadow:0 4px 16px rgba(0,0,0,.7);
    position:relative;
    overflow:hidden;
  }
  header::after{
    content:"";
    position:absolute;
    inset:0;
    background:
      radial-gradient(circle at 15% 0%,rgba(244,143,177,0.24) 0,transparent 55%),
      radial-gradient(circle at 85% 100%,rgba(45,212,191,0.22) 0,transparent 55%);
    mix-blend-mode:screen;
    opacity:.8;
    pointer-events:none;
  }
  .header-inner{position:relative;z-index:1;}
  header h1{
    margin:0;
    font-size:22px;
    font-weight:800;
    letter-spacing:.03em;
  }
  header p{
    margin:4px 0 0;
    font-size:13px;
    color:#e5e7eb;
  }

  .wrap{
    max-width:1200px;
    margin:18px auto 26px;
    padding:0 16px;
  }
  .top-row{
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:8px;
    font-size:13px;
    color:var(--muted);
    margin-bottom:12px;
  }
  .top-left{
    display:flex;
    flex-direction:column;
    gap:2px;
  }
  .chip{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:3px 9px;
    border-radius:999px;
    border:1px solid rgba(148,163,184,.55);
    background:rgba(15,23,42,.9);
    font-size:12px;
  }
  .chip code{
    font-size:11px;
  }

  .card{
    background:var(--card);
    border-radius:18px;
    border:1px solid rgba(255,255,255,.08);
    padding:14px 14px 12px;
    margin-bottom:14px;
    box-shadow:0 8px 22px rgba(0,0,0,.72);
    position:relative;
    overflow:hidden;
  }
  .card::before{
    content:"";
    position:absolute;
    inset:-40%;
    background:radial-gradient(circle at 10% 0%,rgba(148,163,255,0.16) 0,transparent 55%);
    opacity:0.9;
    pointer-events:none;
  }
  .card-inner{position:relative;z-index:1;}

  h2{
    margin:0 0 6px;
    font-size:18px;
    display:flex;
    align-items:center;
    gap:8px;
  }
  h2 span.en{
    font-size:12px;
    font-weight:400;
    color:var(--muted);
  }
  p.desc{
    margin:2px 0 8px;
    font-size:13px;
    color:var(--muted);
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:8px 12px;
  }

  label{
    display:block;
    font-size:13px;
    margin-top:6px;
  }
  input,select{
    width:100%;
    margin-top:3px;
    padding:7px 8px;
    border-radius:8px;
    border:1px solid rgba(148,163,184,.4);
    background:#05081a;
    color:var(--text);
    font-size:13px;
  }
  input:focus,select:focus{
    outline:none;
    border-color:#22c55e;
  }

  .btn-row{
    margin-top:10px;
    display:flex;
    flex-wrap:wrap;
    gap:8px;
  }
  button,a.nav{
    border:none;
    border-radius:999px;
    padding:8px 14px;
    font-size:13px;
    cursor:pointer;
  }
  .btn-primary{
    background:#22c55e;
    color:#082f1a;
    font-weight:700;
  }
  .btn-secondary{
    background:#374151;
    color:#e5e7eb;
  }
  .btn-danger{
    background:#b91c1c;
    color:#fff;
  }
  a.nav{
    display:inline-flex;
    align-items:center;
    gap:6px;
    color:#e0e7ff;
    text-decoration:none;
    border:1px solid rgba(148,163,184,.55);
    background:rgba(15,23,42,.95);
    margin-right:6px;
    margin-top:4px;
  }

  table{
    width:100%;
    border-collapse:collapse;
    font-size:12px;
    margin-top:8px;
  }
  th,td{
    border:1px solid #374151;
    padding:5px 6px;
  }
  th{
    background:#020617;
  }
  tr:nth-child(even){
    background:#111827;
  }

  .center-text{
    text-align:center;
    color:#9ca3af;
  }
  .link-btn{
    display:inline-flex;
    align-items:center;
    padding:3px 7px;
    border-radius:999px;
    border:1px solid #38bdf8;
    color:#e0f2fe;
    font-size:11px;
    text-decoration:none;
  }
  .link-btn:hover{
    background:#0ea5e9;
    color:#0b1120;
  }

  .stat-text{
    font-size:12px;
    color:var(--muted);
    margin-top:4px;
  }

  @media(max-width:600px){
    header h1{font-size:18px;}
  }
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <h1>FA DB ‚Äì ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏≠‡∏õ‡∏ó. ‡∏Å‡∏•‡∏≤‡∏á (fa-db-data-gov)</h1>
    <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏π / ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ / ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏ö‡∏ö FA</p>
  </div>
</header>

<div class="wrap">

  <div class="top-row">
    <div class="top-left">
      <div>‚è± <span id="nowTime">-</span></div>
      <div>
        ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô: <strong id="userEmail">-</strong>
      </div>
      <div>
        <span class="chip">
          üì¶ localStorage key: <code>fa-db-data-gov</code>
        </span>
      </div>
    </div>
    <div style="display:flex;flex-direction:column;gap:4px;align-items:flex-end;">
      <span class="chip">
        üì• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô: <strong id="totalRecords">0</strong> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
      </span>
      <span class="chip">
        üîé ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: <strong id="filteredRecords">0</strong> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
      </span>
      <span class="chip">
        üíæ ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: <strong id="storageSize">0 KB</strong>
      </span>
      <span class="chip">
        üõ° ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡∏£‡∏≠‡∏á: <strong id="backupStatus">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏≥‡∏£‡∏≠‡∏á</strong>
      </span>
    </div>
  </div>

  <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
  <div class="card">
    <div class="card-inner">
      <h2>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à / ‡∏≠‡∏õ‡∏ó.
        <span class="en">Search Local Government Units</span>
      </h2>
      <p class="desc">
        ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô <code>localStorage["fa-db-data-gov"]</code><br>
        ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á <code>JSON.parse(localStorage.getItem("fa-db-data-gov") || "[]")</code> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ.
      </p>

      <div class="grid">
        <div>
          <label>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à / ‡∏ä‡∏∑‡πà‡∏≠ ‡∏≠‡∏õ‡∏ó. (unit / name)</label>
          <input type="text" id="q-unit" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠ ‡∏≠‡∏õ‡∏ó.">
        </div>
        <div>
          <label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (province)</label>
          <select id="q-province">
            <option value="">-- ‡∏ó‡∏∏‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î --</option>
          </select>
        </div>
        <div>
          <label>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ / ‡πÄ‡∏Ç‡∏ï (district)</label>
          <input type="text" id="q-district" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï">
        </div>
        <div>
          <label>‡∏ï‡∏≥‡∏ö‡∏• / ‡πÅ‡∏Ç‡∏ß‡∏á (subdistrict)</label>
          <input type="text" id="q-subdistrict" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á">
        </div>
        <div>
          <label>‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô / ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô (village)</label>
          <input type="text" id="q-village" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô/‡∏ä‡∏∏‡∏°‡∏ä‡∏ô">
        </div>
      </div>

      <div class="btn-row">
        <button type="button" class="btn-primary" id="btnSearch">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        <button type="button" class="btn-secondary" id="btnClear">‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
        <button type="button" class="btn-secondary" id="btnShowAll">‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button type="button" class="btn-secondary" id="btnExportCSV">üì§ Export CSV</button>
      </div>

      <div class="stat-text" id="searchSummary">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</div>
    </div>
  </div>

  <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  <div class="card">
    <div class="card-inner">
      <h2>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à / ‡∏≠‡∏õ‡∏ó.
        <span class="en">Search Result Table</span>
      </h2>
      <p class="desc">
        ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á: #, ‡∏£‡∏´‡∏±‡∏™, ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô, ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î, ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠, ‡∏ï‡∏≥‡∏ö‡∏•, ‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô, ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå ‡πÅ‡∏•‡∏∞‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î.
      </p>

      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>‡∏£‡∏´‡∏±‡∏™</th>
            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
            <th>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            <th>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</th>
            <th>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</th>
            <th>‡∏ï‡∏≥‡∏ö‡∏•</th>
            <th>‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô</th>
            <th>‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</th>
            <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
          </tr>
        </thead>
        <tbody id="dataBody"></tbody>
      </table>
    </div>
  </div>

  <!-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  <div class="card">
    <div class="card-inner">
      <h2>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        <span class="en">Backup & Data Protection</span>
      </h2>
      <p class="desc">
        ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô <code>localStorage["fa-db-data-gov-backup"]</code> ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤/‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô <code>fa-db-data-gov-meta</code><br>
        ‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö (admin) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÇ‡∏î‡∏¢ admin.
      </p>

      <div id="backupAdminBox" style="display:none;">
        <div class="btn-row">
          <button type="button" class="btn-secondary" id="btnBackup">üíæ ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Admin)</button>
          <button type="button" class="btn-danger" id="btnRestore">‚ôª ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏£‡∏≠‡∏á</button>
        </div>
        <div class="stat-text" id="backupInfo">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡∏£‡∏≠‡∏á...</div>
      </div>

      <div id="backupNonAdminBox" class="stat-text" style="display:none;">
        ‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö.
      </div>
    </div>
  </div>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö -->
  <div style="margin-top:10px;">
    <a href="fa-db-local.html" class="nav">
      <span>‚¨Ö</span> ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏≠‡∏õ‡∏ó.
    </a>
    <a href="fa-database-menu.html" class="nav">
      <span>üè†</span> ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å
    </a>
  </div>

</div>

<script>
const STORAGE_KEY = "fa-db-data-gov";
const BACKUP_KEY  = "fa-db-data-gov-backup";
const META_KEY    = "fa-db-data-gov-meta";
const SUPER_ADMINS = ["apipoooo@gmail.com"]; // admin ‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏™‡∏≥‡∏£‡∏≠‡∏á/‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô

let db = [];
let currentFiltered = [];
let isAdmin = false;

/* ===== CLOCK ===== */
function updateClock(){
  const el = document.getElementById("nowTime");
  if(!el) return;
  const now = new Date();
  const opts = {
    year:"numeric",
    month:"short",
    day:"2-digit",
    hour:"2-digit",
    minute:"2-digit",
    second:"2-digit"
  };
  el.textContent = now.toLocaleString("th-TH", opts);
}

/* ===== SESSION & ADMIN ===== */
function updateAdminUI(){
  const boxAdmin = document.getElementById("backupAdminBox");
  const boxNon   = document.getElementById("backupNonAdminBox");
  if(isAdmin){
    boxAdmin.style.display = "block";
    boxNon.style.display   = "none";
  }else{
    boxAdmin.style.display = "none";
    boxNon.style.display   = "block";
  }
}

function displaySession(){
  const el = document.getElementById("userEmail");
  try{
    const raw = localStorage.getItem("fas-session");
    if(!raw){
      el.textContent="-";
      isAdmin=false;
      updateAdminUI();
      return;
    }
    const s = JSON.parse(raw);
    if(s.expiresAt && Date.now() > s.expiresAt){
      el.textContent="-";
      isAdmin=false;
      updateAdminUI();
      return;
    }
    const email = (s.email || "").toString();
    el.textContent = email || "-";
    isAdmin = !!email && SUPER_ADMINS.includes(email.toLowerCase());
  }catch{
    el.textContent="-";
    isAdmin=false;
  }
  updateAdminUI();
}

/* ===== PROVINCES (76 ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î) ===== */
const PROVINCES = [
  "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£","‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà","‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ","‡∏Å‡∏≤‡∏¨‡∏™‡∏¥‡∏ô‡∏ò‡∏∏‡πå","‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£",
  "‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô","‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ","‡∏â‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏£‡∏≤","‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ","‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó",
  "‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥","‡∏ä‡∏∏‡∏°‡∏û‡∏£","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢","‡∏ï‡∏£‡∏±‡∏á",
  "‡∏ï‡∏£‡∏≤‡∏î","‡∏ï‡∏≤‡∏Å","‡∏ô‡∏Ñ‡∏£‡∏ô‡∏≤‡∏¢‡∏Å","‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°","‡∏ô‡∏Ñ‡∏£‡∏û‡∏ô‡∏°",
  "‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤","‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ","‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™",
  "‡∏ô‡πà‡∏≤‡∏ô","‡∏ö‡∏∂‡∏á‡∏Å‡∏≤‡∏¨","‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏°‡∏¢‡πå","‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ","‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå",
  "‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ","‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ","‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤","‡∏û‡∏∞‡πÄ‡∏¢‡∏≤","‡∏û‡∏±‡∏á‡∏á‡∏≤",
  "‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á","‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£","‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ","‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå",
  "‡πÅ‡∏û‡∏£‡πà","‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï","‡∏°‡∏´‡∏≤‡∏™‡∏≤‡∏£‡∏Ñ‡∏≤‡∏°","‡∏°‡∏∏‡∏Å‡∏î‡∏≤‡∏´‡∏≤‡∏£","‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô",
  "‡∏¢‡∏∞‡∏•‡∏≤","‡∏¢‡πÇ‡∏™‡∏ò‡∏£","‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î","‡∏£‡∏∞‡∏ô‡∏≠‡∏á","‡∏£‡∏∞‡∏¢‡∏≠‡∏á",
  "‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ","‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ","‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏•‡∏≥‡∏û‡∏π‡∏ô","‡πÄ‡∏•‡∏¢",
  "‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©","‡∏™‡∏Å‡∏•‡∏ô‡∏Ñ‡∏£","‡∏™‡∏á‡∏Ç‡∏•‡∏≤","‡∏™‡∏ï‡∏π‡∏•","‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£",
  "‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°","‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£","‡∏™‡∏£‡∏∞‡πÅ‡∏Å‡πâ‡∏ß","‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏µ","‡∏™‡∏¥‡∏á‡∏´‡πå‡∏ö‡∏∏‡∏£‡∏µ",
  "‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢","‡∏™‡∏∏‡∏û‡∏£‡∏£‡∏ì‡∏ö‡∏∏‡∏£‡∏µ","‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ","‡∏™‡∏∏‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå","‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢",
  "‡∏´‡∏ô‡∏≠‡∏á‡∏ö‡∏±‡∏ß‡∏•‡∏≥‡∏†‡∏π","‡∏≠‡πà‡∏≤‡∏á‡∏ó‡∏≠‡∏á","‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç","‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ","‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå",
  "‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ","‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ"
];
function populateProvinceSelect(){
  const sel = document.getElementById("q-province");
  PROVINCES.forEach(p=>{
    const o = document.createElement("option");
    o.value = p;
    o.textContent = p;
    sel.appendChild(o);
  });
}

/* ===== STORAGE STATS ===== */
function updateStorageStats(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY) || "[]";
    const bytes = new Blob([raw]).size;
    let text;
    if(bytes < 1024){
      text = bytes + " B";
    }else if(bytes < 1024*1024){
      text = (bytes/1024).toFixed(1) + " KB";
    }else{
      text = (bytes/(1024*1024)).toFixed(2) + " MB";
    }
    document.getElementById("storageSize").textContent = text;
  }catch{
    document.getElementById("storageSize").textContent = "‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î";
  }
}

/* ===== BACKUP META ===== */
function loadMetaObj(){
  let meta = {};
  try{
    meta = JSON.parse(localStorage.getItem(META_KEY) || "{}");
    if(typeof meta !== "object" || meta === null) meta = {};
  }catch{
    meta = {};
  }
  return meta;
}

function updateBackupInfo(meta){
  const infoEl = document.getElementById("backupInfo");
  const statusEl = document.getElementById("backupStatus");
  if(!meta || !meta.backupAt){
    if(infoEl) infoEl.textContent = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
    if(statusEl) statusEl.textContent = "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏≥‡∏£‡∏≠‡∏á";
    return;
  }
  const d = new Date(meta.backupAt);
  const txt = `‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${d.toLocaleString("th-TH")} (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${meta.count || 0} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`;
  if(infoEl) infoEl.textContent = txt;
  if(statusEl) statusEl.textContent = "‡∏°‡∏µ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î";
}

/* ===== BACKUP / RESTORE (ADMIN ONLY) ===== */
function backupNow(){
  if(!isAdmin){
    alert("‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö (admin) ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
    return;
  }
  const raw = localStorage.getItem(STORAGE_KEY) || "[]";
  localStorage.setItem(BACKUP_KEY, raw);
  const meta = {
    backupAt: new Date().toISOString(),
    count: db.length || 0
  };
  localStorage.setItem(META_KEY, JSON.stringify(meta));
  updateBackupInfo(meta);
  alert("‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
}

function restoreBackup(){
  if(!isAdmin){
    alert("‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö (admin) ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
    return;
  }
  const raw = localStorage.getItem(BACKUP_KEY);
  if(!raw){
    alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô");
    return;
  }
  if(!confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏™‡∏≥‡∏£‡∏≠‡∏á ‡∏ó‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) return;

  localStorage.setItem(STORAGE_KEY, raw);
  loadDB();
  const meta = loadMetaObj();
  updateBackupInfo(meta);
  alert("‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
}

/* ===== DB LOAD ===== */
function loadDB(){
  try{
    db = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
    if(!Array.isArray(db)) db = [];
  }catch(e){
    db = [];
  }
  document.getElementById("totalRecords").textContent = db.length;
  currentFiltered = [];
  renderTable();
  document.getElementById("filteredRecords").textContent = 0;
  updateStorageStats();
}

/* ===== RENDER TABLE ===== */
function renderTable(){
  const tbody = document.getElementById("dataBody");
  tbody.innerHTML = "";

  if(!currentFiltered || currentFiltered.length===0){
    const tr = document.createElement("tr");
    tr.innerHTML = `<td colspan="11" class="center-text">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</td>`;
    tbody.appendChild(tr);
    return;
  }

  const maxRows = 500;
  const toShow = currentFiltered.slice(0, maxRows);

  toShow.forEach((r,idx)=>{
    const tr = document.createElement("tr");
    const code = r.code || "";
    const name = r.name || "";
    const unit = r.unit || name;
    const type = r.type || "";
    const prov = r.province || "";
    const dist = r.district || "";
    const subd = r.subdistrict || "";
    const vill = r.village || "";
    const web  = r.website || "";
    const detailHref = "fa-lg-view.html?code=" + encodeURIComponent(code);

    tr.innerHTML = `
      <td>${idx+1}</td>
      <td>${code}</td>
      <td>${name}</td>
      <td>${unit}</td>
      <td>${type}</td>
      <td>${prov}</td>
      <td>${dist}</td>
      <td>${subd}</td>
      <td>${vill}</td>
      <td>${web ? `<a href="${web}" target="_blank" class="link-btn">‡πÄ‡∏õ‡∏¥‡∏î</a>` : ""}</td>
      <td style="text-align:center;">
        <a href="${detailHref}" class="link-btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

/* ===== SEARCH ===== */
function normalize(text){
  return (text||"").toString().toLowerCase().trim();
}

function doSearch(showAll=false){
  if(db.length===0){
    alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô fa-db-data-gov");
    return;
  }
  const qUnit   = normalize(document.getElementById("q-unit").value);
  const qProv   = document.getElementById("q-province").value.trim();
  const qDist   = normalize(document.getElementById("q-district").value);
  const qSubd   = normalize(document.getElementById("q-subdistrict").value);
  const qVill   = normalize(document.getElementById("q-village").value);

  let result = db;

  if(!showAll){
    if(qUnit){
      result = result.filter(r=>{
        const name = normalize(r.name);
        const unit = normalize(r.unit);
        return name.includes(qUnit) || unit.includes(qUnit);
      });
    }
    if(qProv){
      result = result.filter(r=>(r.province||"")===qProv);
    }
    if(qDist){
      result = result.filter(r=> normalize(r.district).includes(qDist));
    }
    if(qSubd){
      result = result.filter(r=> normalize(r.subdistrict).includes(qSubd));
    }
    if(qVill){
      result = result.filter(r=> normalize(r.village).includes(qVill));
    }
  }

  currentFiltered = result;
  document.getElementById("filteredRecords").textContent = result.length;

  const summary = document.getElementById("searchSummary");
  if(showAll){
    summary.textContent = `‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô: ${result.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡∏ï‡∏±‡∏î‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 500 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠)`;
  }else{
    summary.textContent = `‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: ${result.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡∏ï‡∏±‡∏î‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 500 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠)`;
  }

  renderTable();
}

/* ===== EXPORT CSV ===== */
function toCSV(rows){
  if(!rows || rows.length===0) return "";
  const header = ["code","name","unit","type","ministry","level","province","district","subdistrict","village","address","zipcode","lat","long","website","remark"];
  const lines = [];
  lines.push(header.join(","));
  rows.forEach(r=>{
    const row = header.map(k=>{
      const v = (r[k] || "").toString().replace(/"/g,'""');
      return `"${v}"`;
    });
    lines.push(row.join(","));
  });
  return lines.join("\r\n");
}
function exportCSV(){
  const rows = currentFiltered.length>0 ? currentFiltered : db;
  if(rows.length===0){
    alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å");
    return;
  }
  const csv = toCSV(rows);
  const blob = new Blob([csv],{type:"text/csv;charset=utf-8;"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "fa-db-data-gov-export.csv";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

/* ===== CLEAR ===== */
function clearSearch(){
  document.getElementById("q-unit").value = "";
  document.getElementById("q-province").value = "";
  document.getElementById("q-district").value = "";
  document.getElementById("q-subdistrict").value = "";
  document.getElementById("q-village").value = "";
  currentFiltered = [];
  document.getElementById("filteredRecords").textContent = 0;
  document.getElementById("searchSummary").textContent = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤";
  renderTable();
}

/* ===== INIT ===== */
document.getElementById("btnSearch").addEventListener("click", ()=>doSearch(false));
document.getElementById("btnShowAll").addEventListener("click", ()=>doSearch(true));
document.getElementById("btnClear").addEventListener("click", clearSearch);
document.getElementById("btnExportCSV").addEventListener("click", exportCSV);
document.getElementById("btnBackup").addEventListener("click", backupNow);
document.getElementById("btnRestore").addEventListener("click", restoreBackup);

displaySession();
populateProvinceSelect();
loadDB();
const metaInit = loadMetaObj();
updateBackupInfo(metaInit);
updateClock();
setInterval(updateClock,1000);
</script>

</body>
</html>
