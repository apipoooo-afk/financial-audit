<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>FA ‚Äì Fieldwork Stage | Financial Audit System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --primary:#0d47a1;
      --primary-2:#42a5f5;
      --accent:#ffd54f;
      --bg:#060818;
      --bg-soft:#0b1024;
      --card:#11152b;
      --text:#f5f7ff;
      --muted:#a3acc7;
      --border:#262b46;
      --maroon:#7b1e3c;
      --pink:#f48fb1;
      --chip-bg:rgba(244,143,177,0.12);
      --chip-border:rgba(244,143,177,0.5);
      --success:#66bb6a;
      --danger:#ef5350;
      --shadow-soft:0 10px 30px rgba(0,0,0,0.55);
      --radius-lg:18px;
      --radius-sm:10px;
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family:"Segoe UI","Tahoma",sans-serif;
      background:
        radial-gradient(circle at 0% 0%,rgba(123,30,60,0.35) 0,transparent 50%),
        radial-gradient(circle at 100% 100%,rgba(66,165,245,0.35) 0,transparent 55%),
        var(--bg);
      color:var(--text);
      min-height:100vh;
    }

    header{
      padding:18px 16px 14px;
      background:linear-gradient(120deg,#7b1e3c,#0d47a1,#42a5f5);
      box-shadow:var(--shadow-soft);
      position:sticky;
      top:0;
      z-index:20;
    }

    .header-inner{
      max-width:1120px;
      margin:0 auto;
      display:flex;
      flex-wrap:wrap;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }

    .header-main{
      display:flex;
      gap:14px;
      align-items:center;
      flex-wrap:wrap;
    }

    .stage-badge{
      width:46px;
      height:46px;
      border-radius:50%;
      border:2px solid rgba(255,255,255,0.85);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      font-size:20px;
      background:rgba(0,0,0,0.18);
      box-shadow:0 0 0 3px rgba(0,0,0,0.25);
    }

    .title-block h1{
      margin:0;
      font-size:22px;
      letter-spacing:0.03em;
    }
    .title-block .subtitle{
      font-size:13px;
      opacity:0.92;
    }

    .header-meta{
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:12px;
      text-align:right;
    }

    .crumbs a{
      color:#ffe082;
      text-decoration:none;
      font-size:12px;
    }
    .crumbs span{
      opacity:0.8;
      font-size:12px;
    }

    .usage-stats{
      display:flex;
      gap:10px;
      justify-content:flex-end;
      flex-wrap:wrap;
    }
    .usage-pill{
      padding:4px 9px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.35);
      font-size:11px;
      display:flex;
      align-items:center;
      gap:6px;
      background:rgba(0,0,0,0.22);
    }
    .usage-pill strong{font-size:13px;}

    main{
      max-width:1120px;
      margin:18px auto 32px;
      padding:0 12px 28px;
    }

    .intro-card{
      background:linear-gradient(135deg,rgba(17,21,43,0.98),rgba(6,8,24,0.98));
      border-radius:var(--radius-lg);
      border:1px solid var(--border);
      box-shadow:var(--shadow-soft);
      padding:16px 18px;
      display:grid;
      grid-template-columns:minmax(0,2fr) minmax(0,1.2fr);
      gap:14px;
    }
    @media(max-width:800px){
      .intro-card{
        grid-template-columns:minmax(0,1fr);
      }
    }

    .intro-main-title{
      font-size:18px;
      font-weight:600;
      margin-bottom:4px;
    }
    .intro-text{
      font-size:13px;
      color:var(--muted);
    }
    .chips{
      margin-top:8px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .chip{
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--chip-border);
      background:var(--chip-bg);
      color:#fce4ec;
      white-space:nowrap;
    }

    .intro-side{
      border-left:1px dashed rgba(255,255,255,0.12);
      padding-left:14px;
    }
    @media(max-width:800px){
      .intro-side{
        border-left:none;
        border-top:1px dashed rgba(255,255,255,0.12);
        padding-left:0;
        padding-top:10px;
        margin-top:4px;
      }
    }
    .intro-side h3{
      margin:0 0 6px;
      font-size:14px;
    }
    .intro-side ul{
      margin:0;
      padding-left:18px;
      font-size:12px;
      color:var(--muted);
    }

    .toolbar{
      margin-top:18px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .search-box{
      display:flex;
      align-items:center;
      gap:6px;
      background:var(--card);
      border-radius:999px;
      padding:4px 10px;
      border:1px solid var(--border);
      min-width:220px;
      max-width:320px;
      flex:1 1 220px;
    }
    .search-box input{
      flex:1;
      background:transparent;
      border:none;
      outline:none;
      color:var(--text);
      font-size:13px;
    }
    .search-box input::placeholder{
      color:var(--muted);
    }
    .search-icon{
      font-size:14px;
      opacity:0.9;
    }

    .filter-badges{
      display:flex;
      gap:6px;
      flex-wrap:wrap;
      justify-content:flex-end;
      font-size:11px;
    }
    .filter-badge{
      padding:4px 9px;
      border-radius:999px;
      border:1px solid var(--border);
      background:rgba(11,16,36,0.96);
      cursor:pointer;
      opacity:0.9;
    }
    .filter-badge.active{
      border-color:var(--primary-2);
      box-shadow:0 0 0 1px rgba(66,165,245,0.55);
    }

    .sections{
      margin-top:20px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .section-card{
      background:var(--card);
      border-radius:var(--radius-lg);
      border:1px solid var(--border);
      box-shadow:0 8px 22px rgba(0,0,0,0.5);
      overflow:hidden;
    }

    .section-header{
      padding:10px 14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:linear-gradient(135deg,rgba(13,71,161,0.18),rgba(123,30,60,0.22));
      border-bottom:1px solid rgba(255,255,255,0.06);
    }
    .section-title{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .section-title h2{
      margin:0;
      font-size:15px;
    }
    .section-title span{
      font-size:11px;
      color:var(--muted);
    }

    .section-tag{
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.4);
      background:rgba(0,0,0,0.25);
    }

    .section-body{
      padding:10px 14px 14px;
    }

    /* Accordions */
    .accordion{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .acc-item{
      border-radius:var(--radius-sm);
      border:1px solid var(--border);
      background:rgba(6,8,24,0.96);
      overflow:hidden;
    }
    .acc-header{
      padding:8px 10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      cursor:pointer;
    }
    .acc-left{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .acc-label{
      font-size:13px;
      font-weight:600;
    }
    .acc-sub{
      font-size:11px;
      color:var(--muted);
    }
    .acc-meta{
      display:flex;
      flex-direction:column;
      gap:4px;
      align-items:flex-end;
      font-size:10px;
      color:var(--muted);
    }
    .acc-meta span strong{
      color:#fff;
    }
    .acc-toggle-icon{
      font-size:14px;
      transform:rotate(0deg);
      transition:transform .18s.ease-out;
    }
    .acc-item.open .acc-toggle-icon{
      transform:rotate(90deg);
    }

    .acc-panel{
      max-height:0;
      overflow:hidden;
      transition:max-height .2s ease-out;
      border-top:1px solid rgba(255,255,255,0.06);
      background:rgba(9,12,30,0.96);
    }
    .acc-inner{
      padding:8px 11px 9px;
      font-size:12px;
    }

    /* Forms listing */
    .forms-table{
      width:100%;
      border-collapse:collapse;
      font-size:12px;
    }
    .forms-table thead{
      background:rgba(255,255,255,0.03);
    }
    .forms-table th,
    .forms-table td{
      padding:5px 6px;
      text-align:left;
      border-bottom:1px solid rgba(255,255,255,0.06);
    }
    .forms-table th{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:0.03em;
      color:var(--muted);
    }
    .forms-table tr:last-child td{
      border-bottom:none;
    }

    .form-code{
      font-family:"Cascadia Code","Consolas",monospace;
      font-size:12px;
      padding:2px 6px;
      border-radius:999px;
      background:rgba(13,71,161,0.15);
      border:1px solid rgba(66,165,245,0.45);
    }
    .form-desc{
      font-size:12px;
    }
    .form-tag{
      font-size:10px;
      padding:2px 6px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(0,0,0,0.22);
      white-space:nowrap;
    }

    .no-result{
      font-size:12px;
      color:var(--muted);
      padding:4px 0;
    }

    footer{
      max-width:1120px;
      margin:16px auto 10px;
      padding:0 12px;
      font-size:11px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:6px;
    }

    .footer-left{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
    }
    .footer-left a{
      color:var(--primary-2);
      text-decoration:none;
      font-size:11px;
    }
    .footer-right{
      text-align:right;
    }

    .highlight{
      color:var(--accent);
      font-weight:600;
    }
  </style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="header-main">
      <div class="stage-badge">2</div>
      <div class="title-block">
        <h1>‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2 : ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Fieldwork Stage)</h1>
        <div class="subtitle">
          ‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà ‚Äì ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Äì ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡πÄ‡∏ó‡πá‡∏à‡∏à‡∏£‡∏¥‡∏á‡∏ö‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•
        </div>
      </div>
    </div>
    <div class="header-meta">
      <div class="crumbs">
        <a href="index.html">üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</a>
        <span>‚Ä∫</span>
        <a href="fa-lg-annual.html">FA-LG Annual</a>
        <span>‚Ä∫ Fieldwork</span>
      </div>
      <div class="usage-stats">
        <div class="usage-pill">
          ‚è± ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà:
          <strong id="currentUsers">-</strong> ‡∏Ñ‡∏ô
        </div>
        <div class="usage-pill">
          üìä ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏∞‡∏™‡∏°:
          <strong id="totalUsers">-</strong> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        </div>
      </div>
    </div>
  </div>
</header>

<main>
  <!-- Intro -->
  <section class="intro-card">
    <div>
      <div class="intro-main-title">
        Fieldwork = ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡∏≠‡∏õ‡∏ó.
      </div>
      <div class="intro-text">
        ‡∏Ç‡∏±‡πâ‡∏ô‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà ‚Äú‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô‚Äù ‡∏ñ‡∏π‡∏Å‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‚Äù
        ‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ä‡∏∏‡∏î 8.x ‡πÅ‡∏•‡∏∞‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô ‡πÜ
        ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö FA-LG-Fieldwork
        ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏á‡∏≤‡∏ô
      </div>
      <div class="chips">
        <span class="chip">General Audit Procedures</span>
        <span class="chip">8.x ‚Äì Financial Statements</span>
        <span class="chip">Working Papers & Review</span>
        <span class="chip">Internal Control & Risk</span>
      </div>
    </div>
    <div class="intro-side">
      <h3>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ç‡∏±‡πâ‡∏ô Fieldwork</h3>
      <ul>
        <li>‡πÄ‡∏Å‡πá‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ</li>
        <li>‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏£‡∏∞‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</li>
        <li>‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (Step 3 ‚Äì Report)</li>
        <li>‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ö‡∏ó‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï</li>
      </ul>
    </div>
  </section>

  <!-- Tools bar -->
  <div class="toolbar">
    <div class="search-box">
      <span class="search-icon">üîé</span>
      <input id="searchInput" type="text"
             placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡∏ü‡∏≠‡∏£‡πå‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏õ‡∏ó.8.2, ‡∏≠‡∏õ‡∏ó.11.1.4, ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô">
    </div>
    <div class="filter-badges">
      <div class="filter-badge active" data-filter="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      <div class="filter-badge" data-filter="general">‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</div>
      <div class="filter-badge" data-filter="fs">‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏á‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</div>
      <div class="filter-badge" data-filter="summary">‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏£‡∏∏‡∏õ</div>
      <div class="filter-badge" data-filter="ic">‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô/‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</div>
    </div>
  </div>

  <!-- Sections -->
  <div class="sections">

    <!-- A) ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ -->
    <!-- (‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô A, B, C, D ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á‡∏°‡∏≤ ‡πÑ‡∏°‡πà‡∏ï‡∏±‡∏î‡πÑ‡∏°‡πà‡∏•‡∏î
         ‡∏ú‡∏°‡∏Ñ‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡∏∏‡∏Å‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß) -->

    <!-- ... [‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô A, B, C, D ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á‡∏°‡∏≤] ... -->

  </div><!-- /sections -->
</main>

<footer>
  <div class="footer-left">
    <span>‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏µ/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤</span>
    <a href="fa-lg-annual.html">FA-LG Annual Overview</a>
  </div>
  <div class="footer-right">
    Fieldwork Stage ¬∑ Digital LG Financial Audit Platform
  </div>
</footer>

<script>
  // Simple usage counters using localStorage
  (function usageCounters(){
    try{
      const TOTAL_KEY = "fa_fieldwork_total_views";
      let total = parseInt(localStorage.getItem(TOTAL_KEY) || "0",10);
      total += 1;
      localStorage.setItem(TOTAL_KEY,String(total));
      const current = Math.floor(Math.random()*4)+1; // 1‚Äì4 as pseudo current users
      document.getElementById("totalUsers").textContent = total.toLocaleString("th-TH");
      document.getElementById("currentUsers").textContent = current.toLocaleString("th-TH");
    }catch(e){
      // ignore
    }
  })();

  // Accordion behaviour
  document.querySelectorAll(".acc-header").forEach(function(header){
    header.addEventListener("click",function(){
      const item = header.closest(".acc-item");
      const panel = item.querySelector(".acc-panel");
      const isOpen = item.classList.contains("open");
      if(isOpen){
        panel.style.maxHeight = "0px";
        item.classList.remove("open");
      }else{
        panel.style.maxHeight = panel.scrollHeight + "px";
        item.classList.add("open");
      }
    });
  });

  // Filter badges + search
  const searchInput = document.getElementById("searchInput");
  const badges = document.querySelectorAll(".filter-badge");

  function normalize(text){
    return (text || "").toLowerCase();
  }

  function getSectionTypeFromRow(row){
    const section = row.closest(".section-card");
    return section ? section.getAttribute("data-section-type") : "all";
  }

  function applyFilter(){
    const term = normalize(searchInput.value);
    const activeBadge = document.querySelector(".filter-badge.active");
    const filterType = activeBadge ? activeBadge.dataset.filter : "all";

    const allRows = document.querySelectorAll(".form-row");

    allRows.forEach(function(row){
      const keywords = normalize(row.dataset.keywords || row.textContent);
      const sectionType = getSectionTypeFromRow(row);

      const matchFilter = (filterType === "all") || (sectionType === filterType);
      const matchSearch = !term || keywords.indexOf(term) !== -1;

      if(matchFilter && matchSearch){
        row.style.display = "";
      }else{
        row.style.display = "none";
      }
    });

    // handle empty messages within each accordion group
    document.querySelectorAll(".acc-item").forEach(function(item){
      const rows = item.querySelectorAll(".form-row");
      let visibleInGroup = 0;
      rows.forEach(function(r){
        if(r.style.display !== "none"){ visibleInGroup++; }
      });
      const emptyMsg = item.querySelector("[data-empty-msg]");
      if(emptyMsg){
        emptyMsg.style.display = visibleInGroup === 0 ? "block" : "none";
      }
    });
  }

  searchInput.addEventListener("input",applyFilter);

  badges.forEach(function(badge){
    badge.addEventListener("click",function(){
      badges.forEach(function(b){ b.classList.remove("active"); });
      badge.classList.add("active");
      applyFilter();
    });
  });

  // initial filter
  applyFilter();
</script>
</body>
</html>
